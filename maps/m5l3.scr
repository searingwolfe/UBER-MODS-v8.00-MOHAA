main:

exec cvars/cvars.scr			// <><><> UBER MODS <><><>
exec ubermods/runspeed.scr 350 		// set the server's player run speed here (default = 250).
exec ubermods/hardcode_list.scr		// set the "g_ubergametype" for each map in "hardcode_list.scr" (only if "g_uberhardcode 1" cvar is set, default = "0").
					
//setcvar "g_ubergametype" "0"		// "cyb", "snd", "bb", "ft", "0" (normal TDM or FFA, based on "g_gametype" being "2" or "1" respectively).
					// cyber attack, search & destroy, base-builder, freze tag, none (this cvar is usually placed in server.cfg).
setcvar "g_obj_alliedtext1" "m5l3"
setcvar "g_obj_axistext1" ""
setcvar "g_obj_axistext2" ""
setcvar "g_obj_axistext3" "By: Searingwolfe"

setcvar "g_scoreboardpic" "m5l3"

setcvar "fraglimit" "0"
setcvar "timelimit" "20"
setcvar "maxentities" "2000"

setcvar "dmrespawning" "1" 
setcvar "dmroundlimit" "20" 
setcvar "level.clockside" "kills"
local.v = exec ubermods/uberversion.scr

if(getcvar("g_throwingknives") != "1") { setcvar "g_obj_alliedtext3" "" }
if(getcvar("g_throwingknives") == "1") { setcvar "g_obj_alliedtext3" "+ Throwing Knives Mod" }

if(getcvar("g_gametype") == "1") { 		setcvar "g_obj_alliedtext2" ("UBER Free-For-All " + local.v);	setcvar "g_gametypestring" "Free-For-All UBER";		setcvar "g_gametype" "1"; thread ffa_spawns }
if(getcvar("g_gametype") != "1") { 		setcvar "g_obj_alliedtext2" ("UBER Team-Match " + local.v);	setcvar "g_gametypestring" "Team-Match UBER";		setcvar "g_gametype" "2"; thread tdm_spawns
						spawn info_player_deathmatch "origin" "1596 5713 430" "angle" "-103" // for spectators when joining game
						spawn info_player_deathmatch "origin" "1545 3823 422" "angle" "-170"
						spawn info_player_deathmatch "origin" "-126 2166 580" "angle" "-105"
}
if(getcvar("g_ubergametype") == "cyb") {	setcvar "g_obj_alliedtext2" ("UBER Cyber Attack " + local.v);	setcvar "g_gametypestring" "Cyber Attack UBER";		setcvar "g_gametype" "2"; thread cyb }
if(getcvar("g_ubergametype") == "snd") {	setcvar "g_obj_alliedtext2" ("UBER Search-Destroy " + local.v);	setcvar "g_gametypestring" "Search & Destroy UBER";	setcvar "g_gametype" "2"; thread snd }
if(getcvar("g_ubergametype") == "ft") {		setcvar "g_obj_alliedtext2" ("UBER Freeze Tag " + local.v);	setcvar "g_gametypestring" "Freeze Tag UBER";		setcvar "g_gametype" "2"; thread cyb }
if(getcvar("g_ubergametype") == "bb") {		setcvar "g_obj_alliedtext2" ("UBER Base-Builder " + local.v);	setcvar "g_gametypestring" "Base-Builder UBER"; 	thread bb_objects
setcvar "g_obj_axistext1" "Build a base &"; setcvar "g_obj_axistext2" "kill enemy players."

exec alienx/basebuild.scr::main 800 1000 500 1 1 0 0 1 // buildtime objectlimit buildspeed buildtakeweaps buildfalldamage countdownhide hudhide consoleprint
//level.basebuild_laserdist = 700
}

if(getcvar("g_ubermods") == "1" || getcvar("g_ubermods") == "2")
{
exec global/aliascache_triggersounds.scr airstrikes
exec global/aliascache_triggersounds.scr explode_building_small
exec global/aliascache_triggersounds.scr explode_building_large
exec global/aliascache_triggersounds.scr explode_wood_small
exec global/aliascache_triggersounds.scr valve_switch
exec global/aliascache_triggersounds.scr detonator_switch
exec global/aliascache_triggersounds.scr light_switch
}
exec global/aliascache_triggersounds.scr arty_exp_sand
exec global/aliascache_triggersounds.scr arty_exp_water
exec global/aliascache_triggersounds.scr arty_leadinmp

waitthread setup

level waittill prespawn

	exec global/DMprecache.scr
	exec alienx/hud.scr
	exec ui/fix.scr
	level.dmrespawning = 1

	level.script = maps/m5l3.scr	// change these too
	exec global/ambient.scr m5l3
	exec global/door_locked.scr
	exec global/exploder.scr
	exec global/shutter.scr
	//exec global/barrel.scr::explosive_barrel

	setcvar "r_fastsky" "0"
	exec global/fastsky.scr 0
	$world farplane 4500 // 6500 // 150000
	$world farplane_color ( 0.90196 0.78824 0.56078 ) //( 0.6784 0.8353 0.9686 ) // ( 0.25 0.15 0.1Â )

level waittill spawn	// allows lower entnums (overwriting NULL entnums).

	exec global/victory_podium.scr ( -400 2550 368 ) 90 auto auto 5

if(getcvar("g_ubermods") == "1" || getcvar("g_ubermods") == "2")
{
	exec global/dog.scr ( 550 1608 392 ) ( 0 0 0 ) 15 10

	exec killstreaks/claymores.scr 3 2		// number of kills, number of claymores given (max = 5)
	exec killstreaks/airstrikes.scr	5 8		// number of kills, number of bullets to kill a plane
	exec killstreaks/cluster_mines.scr 7 5		// number of kills, number of additional mines spawned (max = 15)
	exec killstreaks/sentry_turret.scr 9 180	// number of kills, time until sentry turret dies

	thread UBER_mapextras_2
	thread UBER_teleporters_2

	if(getcvar("g_ubermods") == "1")
	{
		thread UBER_mapextras
		thread UBER_teleporters
	}

	thread random_explode_anywhere 256 600
}

if(getcvar("g_ubermods") == "1" && getcvar("g_ubergametype") != "bb")
{
	exec map_triggers/player_spotlight.scr ( 208 1654 1028 ) ( 1 1 1 ) s0 9999 -90 1 0 1	// white
	exec map_triggers/player_spotlight.scr ( -400 -2285 1256 ) ( 1 0 0 ) s1 700 90 0 0 1	// red
	exec map_triggers/player_spotlight.scr ( 3083 -3901 1240 ) ( 1 .5 0 ) s2 700 45 0 0 1	// orange
	exec map_triggers/player_spotlight.scr ( -2599 -2731 1189 ) ( 1 1 0 ) s3 700 135 0 0 1	// yellow
	exec map_triggers/player_spotlight.scr ( 2658 3812 1111 ) ( 0 1 0 ) s4 700 180 0 0 1	// green
	exec map_triggers/player_spotlight.scr ( 1015 4368 1029 ) ( 0 1 1 ) s5 700 315 0 0 1	// teal
	exec map_triggers/player_spotlight.scr ( 2623 5638 692 ) ( 0 0 1 ) s6 700 45 0 0 1	// blue
	exec map_triggers/player_spotlight.scr ( -817 3303 1224 ) ( 1 0 1 ) s7 700 45 0 0 1	// magneta

	exec map_triggers/spotlight_colorswitch.scr ( 327 1681 975 ) ( 0 180 0 ) s0 slowrainbow

	exec maps/training_mapscripts/bangalore_wallbomb.scr bb1 ( 1351 6079 351 ) ( 60 -90 0 ) 100 0
	exec map_triggers/map_switches/training_alarmswitch_gunrange.scr ( 1207 6069 450 ) ( 0 180 0 ) bb1 60 450 2   // alarmswitch origin, angles; bangalore name, time, damageradius, pulsatingoff
	exec maps/training_mapscripts/bangalore_wallbomb.scr bb2 ( 1664 2528 536 ) ( 60 90 0 ) 100 0
	exec map_triggers/map_switches/training_alarmswitch_gunrange.scr ( 1883 2511 477 ) ( 0 -90 0 ) bb2 60 450 2
	exec maps/training_mapscripts/bangalore_wallbomb.scr bb3 ( 1231 2384 536 ) ( 60 180 0 ) 100 0
	exec map_triggers/map_switches/training_alarmswitch_gunrange.scr ( 1240 2076 477 ) ( 0 0 0 ) bb3 60 450 2
	exec maps/training_mapscripts/bangalore_wallbomb.scr bb4 ( -783 1983 551 ) ( 60 0 0 ) 100 0
	exec map_triggers/map_switches/training_alarmswitch_gunrange.scr ( -832 1812 492 ) ( 0 180 0 ) bb4 60 450 2
	exec maps/training_mapscripts/bangalore_wallbomb.scr bb5 ( 839 2024 604 ) ( 60 90 0 ) 100 0
	exec map_triggers/map_switches/training_alarmswitch_gunrange.scr ( 1135 2007 505 ) ( 0 -90 0 ) bb5 60 450 2
	exec maps/training_mapscripts/bangalore_wallbomb.scr bb6 ( 641 1896 512 ) ( 60 90 0 ) 100 0
	exec map_triggers/map_switches/training_alarmswitch_gunrange.scr ( 555 1879 472 ) ( 0 -90 0 ) bb6 60 450 2

	local.name1[1] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb7 ( 143 2523 668 ) ( 60 -90 0 ) 100 0
	local.name1[2] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb8 ( -60 2687 668 ) ( 60 180 0 ) 100 0
	local.name1[3] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb9 ( 5 3245 668 ) ( 60 135 0 ) 100 0
	local.name1[4] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb10 ( 282 3308 668 ) ( 60 90 0 ) 100 0
	exec map_triggers/map_switches/training_detonator_gunrange.scr ( 536 2835 416 ) ( 0 -135 0 ) local.name1 60 450 2

	local.name2[4] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb11 ( -2784 -3111 636 ) ( 60 180 0 ) 100 0
	local.name2[3] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb12 ( -2500 -2596 636 ) ( 60 135 0 ) 100 0
	local.name2[2] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb13 ( -1923 -2315 636 ) ( 60 90 0 ) 100 0
	local.name2[1] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb14 ( -970 -2315 636 ) ( 60 90 0 ) 100 0
	exec map_triggers/map_switches/training_detonator_gunrange.scr ( -1672 -2799 648 ) ( 0 -90 0 ) local.name2 60 450 2

	local.name3[1] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb15 ( -591 208 433 ) ( 0 0 6.5 ) 100 0
	local.name3[2] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb16 ( -208 208 433 ) ( 0 180 -6.5 ) 100 0
	local.name3[3] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb17 ( -591 768 489 ) ( 0 0 0 ) 100 0
	local.name3[4] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb18 ( -208 768 489 ) ( 0 180 0 ) 100 0
	local.name3[5] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb19 ( -591 1328 433 ) ( 0 0 -6.5 ) 100 0
	local.name3[6] = exec maps/training_mapscripts/bangalore_wallbomb.scr bb20 ( -208 1328 433 ) ( 0 180 6.5 ) 100 0
	exec map_triggers/map_switches/training_detonator_gunrange.scr ( -948.37 -19.61 391.98 ) ( 0 90 0 ) local.name3 60 450 2

	exec map_triggers/led_trap.scr ( 3234 2948 384 ) led1 2
	exec map_triggers/led_trap.scr ( -1889 2473 860 ) led2 1

	exec maps/gen_mapscripts/radiobomb_walkietrig.scr bombwalkie1 ( 1838 -3132 435 ) ( 0 0 0 ) ( 1916 -3132 444 ) ( 0 -90 0 ) 500 1 1 8
	exec maps/gen_mapscripts/radiobomb_walkietrig.scr bombwalkie2 ( 2004 4995 252 ) ( 0 0 0 ) ( 2124 4995 252 ) ( 0 -90 0 ) 500 1 1 8
}

if(getcvar("g_ubermods") == "2")
{
	exec map_triggers/joint.scr ( 7343 -1104 1540 )

exec map_triggers/lightbomb.scr ( -79 2507 1116 ) ( 695 1575 701 ) ( -1224 1578 648 ) ( 2353 6207 672 ) ( 1740 3853 750 ) ( -2471 -574 664 ) ( -1181 -1078 576 ) ( -2214 -2332 648 ) ( 1333 -2358 783 ) ( 6391 -3108 416 )
exec map_triggers/bomb.scr ( 2649 4364 808 ) ( -1598 3589 1312 ) ( 1928 1582 1011 ) ( -779 1980 1400 ) ( 951 5552 758 ) ( -1261 -615 840 ) ( 327 -177 576 ) ( -5961 1473 1324 ) ( -758 -2292 1256 ) ( 5393 56 1540 )
exec map_triggers/grenade_ammo.scr ( 295 2700 449 ) ( 1056 5080 516 ) ( -1146 2920 385 ) ( 665 1846 568 ) ( 1799 2447 432 ) ( -359 -18 384 ) ( 763 -387 392 ) ( 3123 -2509 504 ) ( -5367 2574 392 ) ( -6279 -1775 36 )
exec map_triggers/rocket_ammo.scr ( -865 2048 678 ) ( 1038 1944 909 ) ( 2883 5361 344 ) ( 1136 5671 414 ) ( 2234 4502 448 ) ( -5578 489 392 ) ( -3041 -1034 408 ) ( 1879 -3115 438 ) ( 3983 -4152 392 ) ( -3041 1653 392 )
exec map_triggers/snowball_ammo.scr ( 5246 6874 964 ) ( 2319 6583 1372 ) ( 2201 2085 688 ) ( 49 4856 1085 ) ( 748 2678 668 ) ( -3274 -5769 1028 ) ( -5985 -348 1114 ) ( -653 -3036 1480 ) ( 2136 -5817 1484 ) ( 7488 -4670 1412 )
exec map_triggers/health.scr ( -7471 -4719 36 ) ( -2236 -5551 -423 ) ( -5977 1420 824 ) ( 1663 -5558 416 ) ( 5042 1353 1348 ) ( 3400 4986 408 ) ( 2030 3995 472 ) ( -2225 3763 618 ) ( 221 1805 392 ) ( 3448 6408 168 )

// Available playervehicle models:
// bmwbike, european_car_grey, european_car_silver, european_car_tan, european_delivery_truck_green, european_delivery_truck_grey, european_delivery_truck_red3,
// gmctruck, jeep, jeep_bench, m3, mercedes, opeltruck, opeltruckgreen, opeltruckgreen_canopy, sdkfz, sdkfz_afrika, shermantank.
//
// Vehicle speeds: trucks/boats = 250, jeeps/euro_vehicles/mercedes = 400, bikes = 500, halftracks/uboats = 40
//
exec global/playervehicle.scr bmwbike1 vehicles/bmwbike.tik ( -6628 -4000 36 ) ( 0 25 0 ) 250 500 45 0
//exec global/playervehicle.scr bmwbike2 vehicles/bmwbike.tik ( 4136 -4000 500 ) ( 0 90 0 ) 250 500 45 0
exec global/playervehicle.scr jeep1 vehicles/jeep.tik ( 2975 6007 300 ) ( 0 180 0 ) 250 400 45 0
//exec global/playervehicle.scr sdkfz1 vehicles/sdkfz.tik ( 1245 5165 300 ) ( 0 -90 0 ) 250 40 45 0

exec global/playerboat.scr boat1 vehicles/higginsxtrahull.tik ( 6058 -2811 150 ) ( 0 120 0 ) 250 250 45

// Available playertank models:
// kingtank, panzer_tank, panzer_tank_europe.
//
exec global/playertank.scr tank01 vehicles/kingtank.tik ( -4750 -3672 36 ) ( 0 45 0 ) 1000 45
exec global/playertank.scr tank02 vehicles/kingtank.tik ( 2909 -3160 480 ) ( 0 135 0 ) 1000 45
exec global/playertank.scr tank03 vehicles/panzer_tank_europe.tik ( 888 3648 303 ) ( 0 180 0 ) 1000 45
//exec global/playertank.scr tank04 vehicles/panzer_tank.tik ( -1293 -1992 368 ) ( 0 0 0 ) 1000 45
//exec global/playertank.scr tank05 vehicles/panzer_tank_europe.tik ( 1503 5174 213 ) ( 0 -90 0 ) 1000 45

//exec global/playernebelwerfer.scr NIL 200 45 ( 2825 1254 416 ) ( 0 -117 0 )
//exec global/playernebelwerfer.scr NIL 200 45 ( -3113 1757 392 ) ( 0 -130 0 )
exec global/playerflak88.scr NIL 200 45 ( -398 -2000 368 ) ( 0 90 0 ) 0 ( 0 0 0 )
//exec global/playerflak88.scr NIL 200 45 ( 3491 -2024 392 ) ( 0 30 0 ) 0 ( 0 45 0 )
exec global/playerflak88.scr NIL 200 45 ( -4699 162 392 ) ( 0 20 0 ) 0 ( 0 45 0 )

exec server_planes/trigger.scr ( 3576 6047 144 ) "allies" 1 0 ( 3576 6047 1000 )	// team (only 1 per modelpair), flying plane scale, modelpair, starting origin (default = origin + 500)
exec server_planes/trigger.scr ( 4339 -4418 392 ) "axis" 1 1 ( 4339 -4418 1000 )	// Allies/Axis modelpair: 0 = p47/fockwulf, 1 = stuka_dsrt/stuka, 2 = c47 for both teams
exec server_planes/trigger.scr ( -4489 -4660 30 ) "axis" 1 0 ( -4489 -4660 1000 )
exec server_planes/trigger.scr ( -5616 3280 368 )  "axis" 1 2 ( -5616 2505 1000 )

//exec jetpack/trigger.scr ( 3550 -4139 502 )
//exec jetpack/trigger.scr ( -4303 -4257 36 )
//exec jetpack/trigger.scr ( 3243 6166 168 )
//exec jetpack/trigger.scr ( -5809 2451 392 )
exec jetpack/trigger.scr ( -400 -2240 392 )
exec jetpack/trigger.scr ( -400 3776 376 )

exec guidedmissile/trigger.scr ( -4691 -4100 36 )
exec guidedmissile/trigger.scr ( 3256 5848 168 )
exec guidedmissile/trigger.scr ( 4316 -3647 392 )

	thread vehicles_undermap
}

thread airstrikes_alternate

	thread consoleprint
	exec ("weather/" + getcvar("mapname") + ".txt") // load all "level.interior_volumes" & "level.water_volumes" for indoor/outdoor ambiences & dynamic weather sounds.
	//exec global/water_wade_sounds.scr 1

while(level.bbactive == 1) { wait 1 }

if(getcvar("g_throwingknives") == "1")
{
	exec global/give_players_knives.scr 1 // spawn everyone with one throwing knife (hold USE + Right-click to throw)

	exec global/throwingknife.scr k1 ( 889 5640 420 ) ( 0 75 0 )
	exec global/throwingknife.scr k2 ( -1029 2073 695 ) ( 0 -90 0 )
	exec global/throwingknife.scr k3 ( 884 1617 922 ) ( 0 83 0 )
	exec global/throwingknife.scr k4 ( 357 1834 412 ) ( 0 -90 0 )
	exec global/throwingknife.scr k5 ( 1628 2179 450 ) ( 0 3 0 )
	exec global/throwingknife.scr k6 ( 2704 -2085 392 ) ( 0 -45 0 )
	exec global/throwingknife.scr k7 ( -2250 -660 424 ) ( 0 60 0 )
	exec global/throwingknife.scr k8 ( -253 16 384 ) ( 0 90 0 )
}
end

////////////////////////////////////////////////////////////////////////

setup:

	level.mapname = getcvar "mapname"
	local.master = spawn scriptmaster
	local.master aliascache riverloop sound/amb/Amb_River.wav soundparms 0.1 0.0 1.0 0.0 1750 8000 auto loaded maps level.mapname
	local.master aliascache fireplace sound/amb/Amb_FirePlace.wav soundparms 1.3 0.0 1.0 0.0 150 1000 auto loaded maps level.mapname
	local.master aliascache explode_bridge1 sound/weapons/explo/Explo_StoneLarge1.wav soundparms 0.9 0.2 0.8 0.4 2000 10000 weapon loaded maps level.mapname
	local.master aliascache explode_bridge2 sound/weapons/explo/Explo_StoneLarge2.wav soundparms 0.9 0.2 0.8 0.4 2000 10000 weapon loaded maps level.mapname

	removeclass Actor
	removeclass AmmoEntity
	removeclass Health
	removeclass Object
	removeclass VehicleTank
	removeclass VehicleTurretGun
	removeclass SplinePath
	removeclass TriggerClickItem
	removeclass TriggerChangeLevel
	removeclass TriggerUse // only $door_locked[1] - [10] entities.

	thread removeclass_ScriptOrigin // do not simply use "removeclass ScriptOrigin" if exploders are on the map, since it will remove $exploderchunk.target ScriptOrigins before they can be saved to $exploderchunk.targetorigin.

	//removeclass WindowObject // 4 entities
	//removeclass InteractObject // 12 entities
	
	$flak88 remove
	$flak88base remove
	$tanktrigger remove // [1] - [14]
	$tankclip remove
	$tankclip2 remove
	$tigercollision remove
	$kingtigercollision remove
	$bomber1trigger remove
	$bomber2trigger remove
	$deathtrigger remove
	$endtouch remove
	$alarmtrigger remove
	$binomid remove
	$binoright remove
	$binoleft remove
	$flak88trigger remove
	$towerdown remove
	$towerkill remove
	$flak88_trigger remove
	$towerup remove
	$breakspawn remove
	$t575 remove
	$house4 remove
	$t576 remove
	$t577 remove
	$t578 remove
	$t579 remove
	$plunger remove

	//$lshutter remove // [1] - [6]
	//$rshutter remove // [1] - [5]

	for(local.e = 1; local.e <= $explodersmashed.size; local.e++)
	{
		if($explodersmashed[local.e].set == 101 && $explodersmashed[local.e].origin == ( -400 1568 488 )) { $explodersmashed[local.e] remove } // removes the playerclip at the bridge (notsolid does not work).
	}

	if(getcvar("g_ubermods") != "1" && getcvar("g_ubermods") != "2")
	{
		thread global/exploder.scr::remove_exploders // also removes their chunks' ScriptOrigin entities, keeps original non-exploded $exploder entities (unless "exploder.scr::remove_exploders 1").
		//thread global/exploder.scr::kill_exploders // also removes their chunks' ScriptOrigin entities, keeps remaining $explodersmashed entities (unless "exploder.scr::killexploders 1").
	}
	else if(getcvar("g_ubermods") == "1")
	{
		thread global/exploder.scr::remove_exploders
	}
	else
	{
		waitthread changeset		// combine more #sets into the bridge's #set 101.
		waitthread exploder_nosound 	// CAUTION: too many explosion sounds playing on the bridge at the same time (1 sound for each $exploder) could cause the server to crash! (keep this thread if using "thread exploders")
		thread exploderfire_adjust 	// turn off ".pause" for an $exploderfire at the sniper tower, and move the exploderfire before saving them to a "level.exploderfire" matrix array (see cvars/findset.scr for more info).
		thread exploderchunk_adjust	// move some of #set 5's chunks and their ScriptOrigin .targets out from the river and back to #set 5's destructible building. Also adjust #set 101's .targetorigins to equal .origins...
						// ... (keeps $exploderchunk ents from flying in all direction, causing for some reason lots of lag if players are standing on the Axis side of the bridge.

		for(local.e = 1; local.e <= $exploder.size; local.e++)
		{
			if($exploder[local.e].set == 101)
			{
				$exploder[local.e].resettime = 60 // allows the bridge exploders to reset after 60 seconds.

				$exploder[local.e].noprint = 1
				$exploder[local.e].nottriggerable = 1 // prevents anything from blowing up the bridge, only allows the detonator to blow it up.
			}
		}
		//level.exploder_killer_noprint = 1
		thread bridge_explode_print

		if(getcvar("g_ubergametype") != "bb")
		{
			thread exploders 500 600 	// damage, radius for all exploders
			//exec global/exploder_test.scr ( -944 -15 392 ) 101	// origin, set number, new (default = 0 allows the exploder to be reset; if new = 1, the detonator will run the "exploders" thread below and prevent resets).
		}
		else { thread global/exploder.scr::remove_exploders }

		thread detonator ( -948.37 -19.61 391.98 ) ( 0 90 0 ) 101 // blows up the bridge (#set 101).
		thread fire_valveswitch 1 ( 1200 1779 480 ) ( 0 -90 0 ) 2 90 0 0.70 // fire ent int, origin, angles, rotate time, rotate amount, clockwise (keep clockwise = 0 when initializing this valve), scale.
		thread fire_valveswitch 2 ( 1200 1731 708 ) ( 0 -90 0 ) 2 90 0 0.70
		thread fire_valveswitch 3 ( 1207 1799.5 947 ) ( 0 180 0 ) 2 90 0 0.70
		thread firesound ( 1225 1823.5 432 )
		thread firesound ( 1225 1775.5 660 )
		thread firesound ( 1225 1799.5 884 )

		exec map_triggers/gen_switches/cabinetswitch.scr ( 753 1784.5 428.33 ) ( 0 0 0 ) 2 1 // origin, angles, model (1 = dark, 2 = tall, 3 = wardrobe), scale. ( -26 +0.5 +0.33 ) from origin in map's .bsp.
	}
/*
	thread river ( -400 767 185 )
	thread river ( -2400 767 185 )
	thread river ( -4045 1462 185 )
	thread river ( -4669 3321 185 )
	thread river ( 1600 767 185 )
	thread river ( 3193 -30 185 )
	thread river ( 4140 -1059 185 )
	thread river ( 5051 -2614 185 )
	thread river ( 5361 -3978 185 )
	thread river ( 5361 -5591 185 )
*/
	exec global/doorlocked.scr ( 2918 6498 168 ) wood 1 // these do not add any entities.
	exec global/doorlocked.scr ( 2199 6276 248 ) wood 1 // origin, door type (wood, metal, gateiron, gatelarge, gatemetal, garagedoor), extra sounds (0 or 1), set number (gets removed when exploder #set explodes).
	exec global/doorlocked.scr ( 1751 6276 248 ) wood 1
	exec global/doorlocked.scr ( 971 5426 240 ) wood 1
	exec global/doorlocked.scr ( 2116 5521 260 ) wood 1
	exec global/doorlocked.scr ( 1908 4825 268 ) wood 1
	exec global/doorlocked.scr ( 1932 4333 280 ) wood 1
	exec global/doorlocked.scr ( 1840 3782 280 ) wood 1
	exec global/doorlocked.scr ( 758 4120 512 ) wood 1
	exec global/doorlocked.scr ( -143 4200 405 ) wood 1
	exec global/doorlocked.scr ( 3030 3940 296 ) wood 1
	exec global/doorlocked.scr ( -6 -233 392 ) wood 1
	exec global/doorlocked.scr ( 477 -184 392 ) wood 1
	exec global/doorlocked.scr ( 2509 -812 392 ) wood 1 5
	exec global/doorlocked.scr ( -1315 -1092 392 ) wood 1
	exec global/doorlocked.scr ( -4 -1136 392 ) wood 1
	exec global/doorlocked.scr ( 545 01228 392 ) wood 1
	exec global/doorlocked.scr ( 1704 -2824 392 ) wood 1

	level.springfield = 1								
	level.bar = 1								
	level.bazooka = 1
	level.panzer = 1 
	level.mp44 = 1		
	level.shotgun = 1
	level.rifle = 1
end

////////////////////////////////////////////////////////////////////////

airstrikes_alternate:

	//if(getcvar("g_ubermods") != "1" && getcvar("g_ubermods") != "2") { end }

	level.bomberplane_health = 200 		// these are defaults set inside global/bomberplane_nospline.scr
	level.bomberplane_bombspeed = 0.25	// speed multiplier; higher = bombs drop horizontally further away from plane's splinepath
	level.bomberplane_bombgravity = 2	// higher = bombs drop faster vertically & closer to plane's splinepath
	level.bomberplane_bombspawntime = 0.2	// time between spawning bombs; lower = bombs spawn less often.
	level.bomberplane_speed = 2350		// lower = planes move slower.
								// keep setsize1 height = 0, unless setsize2 height is < 0. Keep setsize2 height at least 40 units below skybox height.
	level.bomberplane_map_setsize1 = ( -7680 -6080 0 )	// just like a .tik file, adjust these map_setsizes so the planes aren't dropping bombs outside of the map (also includes skybox height).
	level.bomberplane_map_setsize2 = ( 8160 7680 1751 )	// setsize1 should be corner of 3rd quadrant (-x min and -y min). setsize2 should be corner of 1st quadrant (+x max and +y max).

	while(1) //parameters: team (allies, axis, c47), number of planes, off time, bombs off (0 = no, 1 = yes), amount of bombs, time until bombs drop, end (1 = only do 1 airstrike)
	{
		local.rtime = randomint(90) + 60	// randomize time between 90 and 180 seconds. NOTE: any offtime between 1 and 2 is essentially waiting 0 seconds.
		local.r = randomint(2)
		if(getcvar("g_ubermods") == "1" || getcvar("g_ubermods") == "2") { local.bombs = 25; local.timetodrop = 0.1 }	// these are NIL if g_ubermods = 0, preventing bombs from dropping.

		if(local.r == 0) { waitexec global/bomberplane_nospline.scr axis 2 local.rtime local.bombs local.timetodrop 1 }	// axis = 50% chance
		if(local.r == 1)												// allies = 33% chance
		{														// c47 = 17% chance
			local.r2 = randomint(5)
			if(local.r2 == 0 || local.r2 == 1) { waitexec global/bomberplane_nospline.scr allies 2 local.rtime local.bombs local.timetodrop 1 }
			if(local.r2 == 2 || local.r2 == 3) { waitexec global/bomberplane_nospline.scr allies 2 local.rtime local.bombs local.timetodrop 1 }
			if(local.r2 == 4) { waitexec global/bomberplane_nospline.scr c47 2 local.rtime local.bombs local.timetodrop 1 }
			if(local.r2 == 5) { waitexec global/bomberplane_nospline.scr c47 2 local.rtime local.bombs local.timetodrop 1 }
		}
		waitframe
	}
end

////////////////////////////////////////////////////////////////////////

removeclass_ScriptOrigin:

	while(level.exploders_main_done != 1) { waitframe } // wait until exec global/exploder.scr is done first.

	removeclass ScriptOrigin
end

////////////////////////////////////////////////////////////////////////

exploders local.damage local.radius:

	// #set 4 has 2 $exploder entities.
	// #set 7 has 4 $exploder entities.
	// #set 8 has 3 $exploder entities.
	// #set 101 had 11 $exploder entities (for the bridge), but now has 16 since the "changeset" thread combined #set 301, 302, 304, 307, 308 into #set 101.
	// #set 103 had 2 $exploder entities, but now has 3 since the "changeset" thread combined #set 104 into #set 103.

	//level.exploder_killer_onlyprojectiles = 1 // this prevents too many exploders from blowing up simultaneously.

 // radiusdamage1 origin, radiusdamage2 origin, explosion origin, debris origin, debris angle, smoke1 origin, smoke2 origin, trig setsize1, trig setsize2 (trig origin = explosion origin), ::explode set number. [1] - [10] columns.
	local.array = makeArray
		( -944 -90 492 ) ( -944 110 392 ) 		( -944 10 392 ) ( -944 10 425 ) -90 		( -881 -8 272 ) ( -959 -66 307 ) 		( -110 -100 -150 ) ( 110 165 85 ) 102	//$exploder[1].origin = ( -936 21 348 )
		( -400 758 656 ) ( -400 758 275 ) 		( -400 758 456 ) ( -400 758 460 ) -90 		( -480 488 298 ) ( -371 1048 266 ) 		( -365 -734 -456 ) ( 365 785 100 ) 101	//$exploder[2].origin = ( -572 1476 384 )
		( -852 -1260 492 ) ( -652 -1260 492 ) 		( -752 -1260 400 ) ( -752 -1260 750 ) 180 	( -883 -1120 568 ) ( -1430 -1116 542 ) 		( -754 -418 0 ) ( 75 300 570 ) 8	//$exploder[3].origin = ( -748 -1439 472 )
		( -1184 -1217 492 ) ( -1184 -1017 492 ) 	( -1184 -1117 400 ) ( -1184 -1117 750 ) -90 	( -1024 -1056 568 ) ( -1272 -1035 576 ) 	( 0 0 0 ) ( 0 0 0 ) 8			//$exploder[4].origin = ( -748 -1488 640 )
		( -162 -1260 492 ) ( 98 -1060 492 ) 		( 98 -1160 400 ) ( 98 -1160 782 ) -90 		( 759 -1243 552 ) ( 538 -1244 552 ) 		( -234 -474 0 ) ( 754 83 778 ) 7	//$exploder[5].origin = ( 113 -1152 408 )
		( 386 -1284 492 ) ( 386 -1084 492 ) 		( 386 -1184 400 ) ( 386 -1184 782 ) -90 	( 444 -1244 392 ) ( 197 -1155 456 ) 		( 0 0 0 ) ( 0 0 0 ) 7			//$exploder[6].origin = ( 2 -1152 476 )
		( 886 -1348 492 ) ( 663 -1148 492 ) 		( 663 -1248 400 ) ( 663 -1248 782 ) -90 	( -54 -1342 560 ) ( 130 -1152 558 ) 		( 0 0 0 ) ( 0 0 0 ) 7			//$exploder[7].origin = ( -58 -1303 472 )
		( 47 1727 1012 ) ( 247 1527 1012 ) 		( 247 1727 912 ) ( 247 1727 1135 ) 0 		( 335 1816 877 ) ( 336 1640 875 ) 		( -150 -150 -162 ) ( 150 150 358 ) 103	//$exploder[8].origin = ( 160 1728 915 )
		( -400 1328 600 ) ( -400 1328 243 ) 		( -400 1328 400 ) ( -400 1318 405 ) -90 	( -371 1119 266 ) ( -371 976 266 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[9].origin = ( -603 1576 400 )
		( -400 208 600 ) ( -400 208 243 ) 		( -400 208 400 ) ( -400 218 405 ) -90 		( -479 559 288 ) ( -479 417 288 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[10].origin = ( -610 988 484 )
		( -825 1048 432 ) ( -825 1048 232 ) 		( -625 1048 232 ) ( -625 1048 435 ) 0 		( -625 1119 384 ) ( -629 976 273 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[11].origin = ( -611 988 384 )
		( -825 488 432 ) ( -825 488 232 ) 		( -625 488 232 ) ( -625 488 435 ) 0 		( -176 1119 383 ) ( -176 976 383 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[12].origin = ( -604 988 484 )
		( 25 1048 432 ) ( 25 1048 232 ) 		( -175 1048 232 ) ( -175 1048 435 ) 180 	( -624 558 384 ) ( -629 416 384 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[13].origin = ( -611 1108 368 )
		( 25 488 432 ) ( 25 488 232 ) 			( -175 488 232 ) ( -175 488 435 ) 180 		( -175 416 384 ) ( -176 559 304 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[14].origin = ( -610 1107 484 )
		( -400 948 432 ) ( -400 1148 232 ) 		( -400 1048 232 ) ( -400 1048 435 ) -90 	( -95 1047 232 ) ( -712 1045 232 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[15].origin = ( -669 1012 484 )
		( -400 388 432 ) ( -400 588 232 ) 		( -400 488 232 ) ( -400 488 435 ) 90 		( -712 485 232 ) ( -95 487 232 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[16].origin = ( -604 904 452 )
		( -400 1530 458 ) ( -400 1430 258 ) 		( -400 1530 258 ) ( -400 1530 405 ) -90 	( -207 240 392 ) ( -592 232 390 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[17].origin = ( -580 1048 423 )
		( 447 1727 1012 ) ( 247 1927 1012 ) 		( 176 1656 912 ) ( 176 1656 912 ) 90 		( 160 1640 856 ) ( 161 1814 858 ) 		( 0 0 0 ) ( 0 0 0 ) 103			//$exploder[18].origin = ( 248 1727 1110 )
		( 447 1727 668 ) ( 247 1727 768 ) 		( 247 1727 568 ) ( 247 1727 894 ) 180 		( 303 1732 568 ) ( 219 1695 568 ) 		( 0 0 0 ) ( 0 0 0 ) 103			//$exploder[19].origin = ( 248 1728 784 )
		( -400 50 458 ) ( -400 150 258 ) 		( -400 50 258 ) ( -400 50 405 ) 90 		( -604 1318 378 ) ( -195 1328 377 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[20].origin = ( -400 772 352 )
		( 1394 -644 492 ) ( 1394 -116 492 ) 		( 1394 -216 392 ) ( 1394 -216 574 ) -90 	( 1794 -485 392 ) ( 1526 -544 403 ) 		( -150 -726 0 ) ( 662 83 423 ) 4	//$exploder[21].origin = ( 1718 -684 496 )
		( 1577 -1152 644 ) ( 2228 -1660 644 ) 		( 1904 -1407 544 ) ( 1904 -1407 750 ) -90 	( 1640 -1217 743 ) ( 2164 -1217 544 ) 		( -355 -285 0 ) ( 355 285 524 ) 6	//$exploder[22].origin = ( 1904 -1407 700 )
		( 386 -1684 492 ) ( 386 -1484 492 ) 		( 386 -1584 400 ) ( 386 -1584 782 ) 90 		( 224 -1351 392 ) ( 675 -1257 727 ) 		( 0 0 0 ) ( 0 0 0 ) 7			//$exploder[23].origin = ( 362 -1364 738 )
		( -123 -110 592 ) ( 634 -788 592 ) 		( 276 -240 576 ) ( 276 -240 750 ) -90 		( 44 -147 608 ) ( 570 -131 578 ) 		( -438 -530 -184 ) ( 382 187 386 ) 2	//$exploder[24].origin = ( 247 -412 652 )
		( 2506 -1184 492 ) ( 2506 -584 492 ) 		( 2506 -884 392 ) ( 2506 -884 558 ) -90 	( 2077 -635 408 ) ( 2315 -930 408 ) 		( -500 -250 0 ) ( 600 455 708 ) 5	//$exploder[25].origin = ( 2506 -884 723 )
		( 634 -37 492 ) ( 980 -628 492 ) 		( 980 -128 392 ) ( 980 -128 590 ) -90 		( 882 -120 392 ) ( 1235 -156 568 ) 		( -331 -490 0 ) ( 264 83 586 ) 3	//$exploder[26].origin = ( 980 -332 660 )
		( 1716 -992 492 ) ( 1716 -396 492 ) 		( 1716 -496 392 ) ( 1716 -496 598 ) -90 	( 1529 -216 441 ) ( 1308 -215 392 ) 		( 0 0 0 ) ( 0 0 0 ) 4			//$exploder[27].origin = ( 1617 -538 578 )
		( -635 -462 508 ) ( -963 -897 508 ) 		( -963 -544 408 ) ( -963 -544 838 ) -90 	( -739 -531 392 ) ( -1122 -531 654 ) 		( -283 -346 -16 ) ( 332 91 814 ) 1	//$exploder[28].origin = ( -963 -672 782 )
		( -1184 -1713 492 ) ( -1184 -1513 492 ) 	( -1184 -1613 400 ) ( -1184 -1613 750 ) 90 	( -751 -1415 568 ) ( -1472 -1034 392 ) 		( 0 0 0 ) ( 0 0 0 ) 8			//$exploder[29].origin = ( -1087 -1320 660 )
		( -2260 -1057 644 ) ( -1613 -1563 644 ) 	( -1936 -1312 544 ) ( -1936 -1312 750 ) -90 	( -1680 -1136 750 ) ( -2191 -1136 750 ) 	( -355 -285 0 ) ( 355 285 524 ) 9	//$exploder[30].origin = ( -1936 -1312 704 )
		( 0 0 0 ) ( 0 0 0 ) 				( 0 0 0 ) ( -400 1300 425 ) -90 		( -248 234 395 ) ( -346 275 395 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[31].origin = ( -604 768 480 )
		( 0 0 0 ) ( 0 0 0 ) 				( 0 0 0 ) ( -400 236 425 ) 90 			( -399 224 395 ) ( -482 242 395 )		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[32].origin = ( -604 632 472 )
		( 0 0 0 ) ( 0 0 0 ) 				( 0 0 0 ) ( -400 1357 425 ) -90 		( -552 254 395 ) ( -248 1318 395 )		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[33].origin = ( -653 488 455 )
		( 0 0 0 ) ( 0 0 0 ) 				( 0 0 0 ) ( -400 179 425 ) 90			( -553 1328 395 ) ( -401 1355 395 )		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[34].origin = ( -603 328 437 )
		( 0 0 0 ) ( 0 0 0 ) 				( 0 0 0 ) ( 0 0 0 ) 0 				( -473 1343 395 ) ( -320 1336 395 ) 		( 0 0 0 ) ( 0 0 0 ) 101			//$exploder[35].origin = ( -603 154 417 )
	endArray

	for(local.e = 1; local.e <= local.array.size; local.e++)
	{
		//if(local.e == 30) { local.test = 1 } 			// spawning test emitters for $exploder[30]'s radiusdamage, explosion, debris, smoke, and trig origin (same as explosion origin for these exploders).
		//else { local.test = 0 }				// test = 1 also spawns lasers around the $exploder_trigshot trigger for the "local.e" exploder #set.

		if(local.e == 1) { local.smaller = 1 } // smaller earthquake for these exploder #sets only (#102).
		else { local.smaller = 0 }

		if(local.test == 1)
		{
			exec global/exploder_killer.scr local.array[local.e][1] local.array[local.e][2] local.array[local.e][3] local.array[local.e][4] local.array[local.e][5] local.array[local.e][6] local.array[local.e][7] local.array[local.e][8] local.array[local.e][9] local.array[local.e][10] local.damage local.radius local.smaller local.array[local.e][3] local.test
		}
		else
		{
			exec global/exploder_killer.scr local.array[local.e][1] local.array[local.e][2] local.array[local.e][3] local.array[local.e][4] local.array[local.e][5] local.array[local.e][6] local.array[local.e][7] local.array[local.e][8] local.array[local.e][9] local.array[local.e][10] local.damage local.radius local.smaller
		}
	}
end

////////////////////////////////////////////////////////////////////////

// combine all entities from #set 104 into #set 103, since these 2 sets blow up 2 halves of the same structure (sniper tower with ladder).
// combine all entities from #set 301, 302, 304, 307, 308 into #set 101, since these sets are part of the bridge structure.
changeset:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 104) { $exploder[local.e].set = 103 }

		if($exploder[local.e].set == 301) { $exploder[local.e].set = 101 }
		if($exploder[local.e].set == 302) { $exploder[local.e].set = 101 }
		if($exploder[local.e].set == 304) { $exploder[local.e].set = 101 }
		if($exploder[local.e].set == 307) { $exploder[local.e].set = 101 }
		if($exploder[local.e].set == 308) { $exploder[local.e].set = 101 }
	}
	for(local.e = 1; local.e <= $exploderchunk.size; local.e++)
	{
		if($exploderchunk[local.e].set == 104) { $exploderchunk[local.e].set = 103 }

		if($exploderchunk[local.e].set == 301) { $exploderchunk[local.e].set = 101 }
		if($exploderchunk[local.e].set == 302) { $exploderchunk[local.e].set = 101 }
		if($exploderchunk[local.e].set == 304) { $exploderchunk[local.e].set = 101 }
		if($exploderchunk[local.e].set == 307) { $exploderchunk[local.e].set = 101 }
		if($exploderchunk[local.e].set == 308) { $exploderchunk[local.e].set = 101 }
	}
	for(local.e = 1; local.e <= $explodersmashed.size; local.e++)
	{
		if($explodersmashed[local.e].set == 104) { $explodersmashed[local.e].set = 103 }

		if($explodersmashed[local.e].set == 301) { $explodersmashed[local.e].set = 101 }
		if($explodersmashed[local.e].set == 302) { $explodersmashed[local.e].set = 101 }
		if($explodersmashed[local.e].set == 304) { $explodersmashed[local.e].set = 101 }
		if($explodersmashed[local.e].set == 307) { $explodersmashed[local.e].set = 101 }
		if($explodersmashed[local.e].set == 308) { $explodersmashed[local.e].set = 101 }
	}
	for(local.e = 1; local.e <= $exploderfire.size; local.e++)
	{
		if($exploderfire[local.e].set == 104) { $exploderfire[local.e].set = 103 }

		if($exploderfire[local.e].set == 301) { $exploderfire[local.e].set = 101 }
		if($exploderfire[local.e].set == 302) { $exploderfire[local.e].set = 101 }
		if($exploderfire[local.e].set == 304) { $exploderfire[local.e].set = 101 }
		if($exploderfire[local.e].set == 307) { $exploderfire[local.e].set = 101 }
		if($exploderfire[local.e].set == 308) { $exploderfire[local.e].set = 101 }
	}
end

////////////////////////////////////////////////////////////////////////

exploderfire_adjust:

	for(local.i = 1; local.i <= $exploderfire.size; local.i++)
	{
		if($exploderfire[local.i].origin == ( 351.99 1671.99 972.13 )) // sniper tower with ladder.
		{
			$exploderfire[local.i].origin = ( 247 1727 568 )
			$exploderfire[local.i].pause = 0
		}

		if($exploderfire[local.i].set == 101) // for the bridge.
		{
			$exploderfire[local.i].pause = 0.25
			$exploderfire[local.i].origin += ( 0 0 -50 )
		}

		if($exploderfire[local.i].model == "models/emitters/concjibs_1.tik") // these emitters look weird since they don't stop emitting.
		{
			if($exploderfire[local.i].origin == ( 119.99 -1216.01 988.13 )) { $exploderfire[local.i].model = "models/emitters/mortar_higgins.tik" }
			else { $exploderfire[local.i].model = "models/emitters/explosion_mine.tik" }
			$exploderfire[local.i].pause = 0.25
		}
	}

	local.exploderfire = spawn script_model targetname "exploderfire" // adding an $exploderfire for #set 5's largest $exploderchunk.
	local.exploderfire model "emitters/mortar_higgins.tik"
	local.exploderfire.origin = ( 2950 -925 393 )
	local.exploderfire.angles = ( 270 0 0 )
	local.exploderfire.scale = 1.2
	local.exploderfire.set = 5
	local.exploderfire.pause = 2.000
	thread waitset local.exploderfire.origin local.exploderfire.pause

/* // This below is not needed, since $exploderfire ents are already spawned before level waittill spawn in the map's .BSP
	level waittill spawn

	if(level.exploderfire != NIL && level.exploderfire.size > 0)		// Columns [1] to [9].
	{
		for(local.f = 1; local.f <= level.exploderfire.size; local.f++) // Columns left to right: model, origin, angles, scale, set #, pause, damage, damageradius, fire")
		{
			if(level.exploderfire[local.f][2] == ( 351.99 1671.99 972.13 )) // sniper tower with ladder.
			{
				level.exploderfire[local.f][2] = ( 247 1727 568 ) 	// origin
				level.exploderfire[local.f][6] = 0 			// pause = 0
			}
		}
	}
*/
end

waitset local.origin local.time:

	for(local.i = 1; local.i <= $exploder.size; local.i++)
	{
		if($exploder[local.i].set == 5) { local.exploder = $exploder[local.i]; break }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	local.temp = spawn script_model
	local.temp model "fx/dummy.tik"
	local.temp.origin = local.origin

	wait local.time
	local.temp playsound explode_building_large
	wait 5
	local.temp remove
end

////////////////////////////////////////////////////////////////////////

exploderchunk_adjust:

	while(level.exploders_main_done != 1) { waitframe } // wait until all .targetorigin values have been saved.

	for(local.i = 1; local.i <= $exploderchunk.size; local.i++)
	{
		if($exploderchunk[local.i].set == 5)
		{
			if($exploderchunk[local.i].origin[1] > -200)
			{
				$exploderchunk[local.i].origin += ( -550 -880 350 )
				$exploderchunk[local.i].targetorigin += ( -550 -880 350 )
				$exploderchunk[local.i].pause = 2.000
			}

			if($exploderchunk[local.i].origin == ( 2803 -948 788 )) { $exploderchunk[local.i].targetorigin = ( 2803 -948 1184 ) } // make this large chunk only fly straight upwards.
		}

		if($exploderchunk[local.i].set == 101)
		{
			$exploderchunk[local.i].targetorigin = $exploderchunk[local.i].targetorigin + ( 0 0 -100 ) // explode the chunks near the bridge's height, instead of high above it.
			$exploderchunk[local.i].pause = 0
		}
	}

	for(local.i = 1; local.i <= $explodersmashed.size; local.i++)
	{
		if($explodersmashed[local.i].set == 101)
		{
			$explodersmashed[local.i].pause = 0
		}
	}		
end

////////////////////////////////////////////////////////////////////////

exploder_nosound:

	local.first = 1
	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 101)
		{
			if(local.first != 1) { $exploder[local.e].nosound = 1 }
			local.first = 0
		}
	}
end

////////////////////////////////////////////////////////////////////////

bridge_explode_print:

	local.string = ""
	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 101)
		{
			if(local.exploder == NIL) { local.exploder = $exploder[local.e] }
			local.string += local.e + ","
		}
	}
	local.string2 = ""
	for(local.s = 0; local.s < local.string.size - 2; local.s++) { local.string2 += local.string[local.s] }

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	println("----- Blowing up $exploder[" + local.string2 + "] with '.set = 101'")
	println("----- Blowing up the bridge with '.set = 101'")

	if(local.exploder.resettime != NIL)
	{
		while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded == 1) { waitframe }

		println("----- Resetting $exploder[" + local.string2 + "] with '.set = 101'")
		println("----- Resetting the bridge with '.set = 101'")
		thread bridge_explode_print
	}
end

////////////////////////////////////////////////////////////////////////

detonator local.origin local.angles local.set:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == local.set)
		{
			local.exploder = $exploder[local.e]
			local.resettime = $exploder[local.e].resettime
		}
	}
	if(local.exploder == NIL || local.exploder == NULL) { end }

	local.detonator = spawn script_model targetname "bridge_detonator"
	local.detonator model "miscobj/detonator.tik"
	local.detonator.origin = local.origin
	local.detonator.angles = local.angles

	local.detonator anim idle
	local.detonator notsolid

	local.detonatortrig = spawn trigger_use targetname "bridge_detonatortrig"
	local.detonatortrig.origin = local.detonator.origin
	local.detonatortrig setsize ( -20 -20 -20 ) ( 20 20 20 )
	local.detonatortrig message ("*** Blowing up the bridge. ***")

	local.detonatortrig waittill trigger
	local.detonator anim fire
	local.detonator playsound plungersound
	waitframe // need this, otherwise setthread will run immediately.
	local.detonatortrig setthread triggered

	local.r = (randomint(150) + 50.000) / 100
	wait local.r

	local.exploder.dead = 1 // begin the bridge explosion from global/exploder_killer.scr.

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.dead == 1) { waitframe } // wait until the exploder is done exploding first.

	wait 1
	local.detonatortrig setthread off
	local.detonatortrig message ("*** Resetting the detonator. ***")
	local.detonatortrig waittill trigger
	local.detonator anim idle
	local.detonator playsound light_switch

	wait 1
	local.detonator remove
	local.detonatortrig remove
	thread detonator local.origin local.angles local.set
end

triggered:

	local.player = parm.other
	local.player iprint ("Please wait for the bridge to reset.")
	self message ""
end

off:
end

////////////////////////////////////////////////////////////////////////

vehicles_undermap:

	local.undermap_volumes = makeArray
		( 2048 -1536 -512 ) ( -3712 -10000 -500 ) ( 0 0 1 )
		( 2048 -1536 128 ) ( -10000 0 -500 ) ( 0 10000 1 )
		( 2048 -1536 128 ) ( 0 -10000 -500 ) ( 10000 10000 1 )
		( 0 4000 128 ) ( -10000 0 -300 ) ( 10000 10000 1 )
		( -7486 -6079 36 ) ( -300 -100 -600 ) ( 2032 1329 1 )
		( -7486 -6079 36 ) ( -300 -100 -600 ) ( 2399 1265 1 )
		( -7486 -6079 36 ) ( -300 -100 -600 ) ( 5586 433 1 )
	endArray

	while(1)
	{
		for(local.a = 0; local.a <= level.drivable_entities.size; local.a++)
		{
			for(local.s = 1; $(level.drivable_entities[local.a]) != NULL && local.s <= $(level.drivable_entities[local.a]).size; local.s++)
			{
				if(local.undermap_volumes != NIL && local.undermap_volumes != 0 && $(level.drivable_entities[local.a])[local.s].model != "models/vehicles/higginsxtrahull.tik" && $(level.drivable_entities[local.a])[local.s].model != "models/vehicles/uboat.tik") // if vehicles are inside a volume, blow them up.
				{
					for(local.v = 1; local.v <= local.undermap_volumes.size; local.v++)
					{
						local.X_min[local.v] = local.undermap_volumes[local.v][1][0] + local.undermap_volumes[local.v][2][0]
						local.X_max[local.v] = local.undermap_volumes[local.v][1][0] + local.undermap_volumes[local.v][3][0]
						local.Y_min[local.v] = local.undermap_volumes[local.v][1][1] + local.undermap_volumes[local.v][2][1]
						local.Y_max[local.v] = local.undermap_volumes[local.v][1][1] + local.undermap_volumes[local.v][3][1]
						local.Z_min[local.v] = local.undermap_volumes[local.v][1][2] + local.undermap_volumes[local.v][2][2]
						local.Z_max[local.v] = local.undermap_volumes[local.v][1][2] + local.undermap_volumes[local.v][3][2]
						local.origin = $(level.drivable_entities[local.a])[local.s].origin
	
						if(int(local.origin[0]) >= local.X_min[local.v] && int(local.origin[0]) <= local.X_max[local.v] && int(local.origin[1]) >= local.Y_min[local.v] && int(local.origin[1]) <= local.Y_max[local.v] && int(local.origin[2]) >= local.Z_min[local.v] && int(local.origin[2]) <= local.Z_max[local.v])
						{
							$(level.drivable_entities[local.a])[local.s] damage $world 15000 $world (0 0 0) (0 0 0) (0 0 0) 0 9 0 0
						}
					}
				}

				if(level.water_volumes != NIL && level.water_volumes != 0 && $(level.drivable_entities[local.a])[local.s].model != "models/vehicles/higginsxtrahull.tik" && $(level.drivable_entities[local.a])[local.s].model != "models/vehicles/uboat.tik") // if vehicles are inside a water volume, blow them up.
				{
					for(local.v = 1; local.v <= level.water_volumes.size; local.v++)
					{
						local.X_min[local.v] = level.water_volumes[local.v][1][0] + level.water_volumes[local.v][2][0]
						local.X_max[local.v] = level.water_volumes[local.v][1][0] + level.water_volumes[local.v][3][0]
						local.Y_min[local.v] = level.water_volumes[local.v][1][1] + level.water_volumes[local.v][2][1]
						local.Y_max[local.v] = level.water_volumes[local.v][1][1] + level.water_volumes[local.v][3][1]
						local.Z_min[local.v] = level.water_volumes[local.v][1][2] + level.water_volumes[local.v][2][2]
						local.Z_max[local.v] = level.water_volumes[local.v][1][2] + level.water_volumes[local.v][3][2] - 50
						local.origin = $(level.drivable_entities[local.a])[local.s].origin
	
						if(int(local.origin[0]) >= local.X_min[local.v] && int(local.origin[0]) <= local.X_max[local.v] && int(local.origin[1]) >= local.Y_min[local.v] && int(local.origin[1]) <= local.Y_max[local.v] && int(local.origin[2]) >= local.Z_min[local.v] && int(local.origin[2]) <= local.Z_max[local.v])
						{
							$(level.drivable_entities[local.a])[local.s] damage $world 15000 $world (0 0 0) (0 0 0) (0 0 0) 0 9 0 0
						}
					}
				}
			}
		}
		waitframe
	}
end

////////////////////////////////////////////////////////////////////////

fire_valveswitch local.int local.origin local.angles local.rotatetime local.rotateamount local.clockwise local.scale:

	local.valve = spawn script_model
	local.valve model "animate/redvalve_nopulse.tik"
	local.valve.origin = local.origin
	local.valve.angles = local.angles
	if(local.scale == NIL) { local.valve.scale = 1 }
	else { local.valve.scale = local.scale }
	local.valve notsolid

	local.valvetrig = spawn trigger_use
	local.valvetrig.origin = local.valve.origin
	local.valvetrig setsize ( -20 -20 -20 ) ( 20 20 20 )

	local.valvetrig waittill trigger
	local.valvetrig nottriggerable
	local.valve.model = animate/redvalve_pulse.tik

	if($fireplace_smoke == NULL || local.int > $fireplace_smoke.size) { end }

	local.player = parm.other
	if(local.clockwise == 0) { local.valvetrig message ("*** Closing the chimney valve. ***") }
	if(local.clockwise == 1) { local.valvetrig message ("*** Opening the chimney valve. ***") }

	local.valve time (local.rotatetime)
	if(local.clockwise == 0) { local.valve rotateZup local.rotateamount }
	if(local.clockwise == 1) { local.valve rotateZdown local.rotateamount }
	local.valve playsound valve_switch
	local.valve waitmove

	if(local.clockwise == 0) { $fireplace_smoke[local.int] anim start } // turn on the smoke after valve is done rotating.
	if(local.clockwise == 1) { $fireplace_smoke[local.int] anim stop }

	local.valve.model = animate/redvalve_nopulse.tik
	//wait 1

	local.clockwise++
	if(local.clockwise >= 2) { local.clockwise = 0 } // binary alternating number that controls valve rotation.

	local.angles = local.valve.angles
	waitframe // need waitframe here, otherwise trigger's message will not appear.
	local.valve remove
	local.valvetrig remove
	thread fire_valveswitch local.int local.origin local.angles local.rotatetime local.rotateamount local.clockwise local.scale
end

////////////////////////////////////////////////////////////////////////

firesound local.origin:

	local.fire = thread soundent local.origin
	local.fire loopsound fireplace
	local.fire light 1 .535433 .114173 60 
end

river local.origin:

	local.river = thread soundent local.origin
	local.river loopsound riverloop
end

soundent local.origin:

	local.ent = spawn script_model
	local.ent model "static/indycrate.tik" // need a model for script_models to do "loopsound".
	local.ent.origin = local.origin
	local.ent notsolid
	local.ent.scale = 0.01 // don't use "hide", otherwise loopsound will not work.
end local.ent

////////////////////////////////////////////////////////////////////////
//*** --------------------------------------------
//*** "Random Explosions Anywhere"
//*** --------------------------------------------

random_explode_setup local.damage local.radius:

	thread random_explode ( 6076 -4048 -326 ) local.damage local.radius
	thread random_explode ( 3530 -5574 -167 ) local.damage local.radius
	thread random_explode ( -4118 6154 -314 ) local.damage local.radius
	thread random_explode ( -3631 2618 -128 ) local.damage local.radius 0 33
end

random_explode_anywhere local.damage local.radius:

	wait ((randomfloat(190) / 10) + 0.1)

	local.x_min = 7680 // map X-Y setsizes (-1 unit from the edges, only use + values)
	local.x_max = 7680
	local.y_min = 6080
	local.y_max = 7904
	local.height = 1751

	local.r = randomint(2)
	if(local.r == 1) { local.x = randomint(local.x_min) * -1 }
	else { local.x = randomint(local.x_max) }
	if(local.r == 1) { local.y = randomint(local.y_min) * -1 }
	else { local.y = randomint(local.y_max) }

	local.origin = ( local.x local.y local.height )
	local.z = trace local.origin (local.origin + ( 0 0 -5000 )) 0
	if(local.z_inv == 1) { local.z = local.z * -1 }

	if(level.water_volumes != NIL && level.water_volumes != 0) // if randomized origin is inside of a water volume, do a water explosion
	{
		for(local.v = 1; local.v <= level.water_volumes.size; local.v++)
		{
			local.X_min[local.v] = level.water_volumes[local.v][1][0] + level.water_volumes[local.v][2][0]
			local.X_max[local.v] = level.water_volumes[local.v][1][0] + level.water_volumes[local.v][3][0]
			local.Y_min[local.v] = level.water_volumes[local.v][1][1] + level.water_volumes[local.v][2][1]
			local.Y_max[local.v] = level.water_volumes[local.v][1][1] + level.water_volumes[local.v][3][1]
			local.Z_min[local.v] = level.water_volumes[local.v][1][2] + level.water_volumes[local.v][2][2]
			local.Z_max[local.v] = level.water_volumes[local.v][1][2] + level.water_volumes[local.v][3][2]
	
			if(int(local.origin[0]) >= local.X_min[local.v] && int(local.origin[0]) <= local.X_max[local.v] && int(local.origin[1]) >= local.Y_min[local.v] && int(local.origin[1]) <= local.Y_max[local.v] && int(local.origin[2]) >= local.Z_min[local.v] && int(local.origin[2]) <= local.Z_max[local.v])
			{
				thread random_explode_water ( local.x local.y local.z[2] ) local.damage local.radius 1
			}
			else { thread random_explode ( local.x local.y local.z[2] ) local.damage local.radius 1 }
		}
	}
	else { thread random_explode ( local.x local.y local.z[2] ) local.damage local.radius 1 }

	thread random_explode_anywhere local.damage local.radius
end

random_explode local.origin local.damage local.radius local.off local.set:

	if(local.off != 1) { wait (randomfloat 20 + 25) }

   	local.exp = spawn script_model
	local.exp model "animate/fx_mortar_dirt.tik"
   	local.exp.origin = local.origin
   	local.exp.scale = 1.5

	local.exp playsound arty_leadinmp
	wait 1

	if(local.set != NIL)
	{
		for(local.e = 1; local.e <= $exploder_trigshot.size; local.e++)
		{
			if($exploder_trigshot[local.e].set == local.set) { local.trigshot = $exploder_trigshot[local.e] }
		}
		for(local.e = 1; local.e <= $exploder_trigproj.size; local.e++)
		{
			if($exploder_trigproj[local.e].set == local.set) { local.trigproj = $exploder_trigproj[local.e] }
		}

		if(local.trigshot != NIL && local.trigshot != NULL) { local.trigshot nottriggerable }
		if(local.trigproj != NIL && local.trigproj != NULL) { local.trigproj nottriggerable }

		radiusdamage local.origin local.damage local.radius

		if(local.trigshot != NIL && local.trigshot != NULL) { local.trigshot triggerable }
		if(local.trigproj != NIL && local.trigproj != NULL) { local.trigproj triggerable }
	}
	else { radiusdamage local.origin local.damage local.radius }

	local.exp playsound artyexp_sand
	local.exp anim start
	waitframe
	local.exp remove

	if(local.off != 1) { thread random_explode local.origin local.damage local.radius 0 local.set }
end

random_explode_water local.origin local.damage local.radius local.off:

	if(local.off != 1) { wait (randomfloat 30 + 15) }

   	local.exp = spawn script_model
	local.exp model "animate/fx_mortar_water.tik"
   	local.exp.origin = local.origin
   	local.exp.scale = 1.5

	local.exp playsound arty_leadinmp
	wait 1

	local.spray = spawn script_model
	local.spray model "emitters/fx_oceanspray.tik"
	local.spray.origin = local.origin + ( 0 0 50 )
	local.spray.scale = 1.8

	radiusdamage (local.origin + ( 0 0 50 )) local.damage local.radius
	local.exp playsound artyexp_water
	local.exp anim start
	local.spray anim start
	waitframe
	local.exp remove
	local.spray remove

	if(local.off != 1) { thread random_explode_water local.origin local.damage local.radius }
end

////////////////////////////////////////////////////////////////////////

tdm_spawns:

	local.team1 = "allied" // do not use "allies"
	local.team2 = "axis"
	thread player_spawns local.team1 local.team2
end

ffa_spawns:

	local.team1 = "deathmatch"
	local.team2 = "deathmatch"
	thread player_spawns local.team1 local.team2
end

player_spawns local.team1 local.team2:

	spawn ("info_player_" + local.team1) "origin" "3978.362 5848.248 168.125" "angle" "174" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3457.379 6309.109 168.125" "angle" "-165" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3815.280 5754.096 168.125" "angle" "165" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3722.884 5527.125 168.125" "angle" "129" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3591.125 5527.125 173.615" "angle" "78" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3272.875 6488.875 168.125" "angle" "-146" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3288.875 6367.378 168.125" "angle" "-163" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2855.125 6488.875 168.125" "angle" "-58" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2839.125 6367.375 168.125" "angle" "-31" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3336.875 5667.125 168.125" "angle" "153" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2792.875 6320.875 168.125" "angle" "-147" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2327.125 6312.875 223.839" "angle" "-34" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1304.126 6229.409 224.125" "angle" "2" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1400.875 6646.581 350.310" "angle" "-106" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "975.519 6223.125 350.310" "angle" "1" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1160.482 6403.933 350.310" "angle" "-34" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1400.821 6409.313 350.125" "angle" "-90" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1400.042 6284.874 224.125" "angle" "-47" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1239.126 6064.875 224.125" "angle" "-57" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2808.875 5527.125 225.609" "angle" "134" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2112.875 5568.875 252.125" "angle" "-125" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2112.875 4999.127 252.125" "angle" "112" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2019.125 4999.326 252.125" "angle" "83" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1384.874 6176.875 224.125" "angle" "-112" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "871.126 6176.875 384.125" "angle" "-33" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "871.125 5660.931 384.125" "angle" "55" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "942.072 5599.125 384.125" "angle" "68" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1192.875 5599.125 384.125" "angle" "107" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1192.875 5759.887 384.125" "angle" "106" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "975.125 5552.875 224.125" "angle" "-56" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "975.125 5119.125 239.959" "angle" "30" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1951.125 4751.126 468.125" "angle" "55" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1951.127 5592.875 468.125" "angle" "-63" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2576.875 5592.875 468.125" "angle" "-128" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2387.035 4751.126 468.125" "angle" "97" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2442.440 4751.125 468.125" "angle" "30" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2576.875 4983.973 468.125" "angle" "-92" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3008.875 5351.127 344.125" "angle" "125" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2873.916 5351.428 344.125" "angle" "67" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2984.874 5628.875 360.125" "angle" "-170" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3008.874 5571.896 344.125" "angle" "168" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2256.875 4283.125 448.125" "angle" "115" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1971.125 4263.125 448.125" "angle" "57" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2256.875 4696.874 448.125" "angle" "-175" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2802.207 5476.875 233.875" "angle" "-102" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3008.875 5308.875 231.982" "angle" "-119" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3008.789 4986.179 245.547" "angle" "-170" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2886.492 4659.274 266.164" "angle" "-158" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2303.125 4704.875 280.210" "angle" "-64" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2287.125 4220.875 277.587" "angle" "-77" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2183.125 3996.875 280.125" "angle" "-64" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1958.555 3708.875 280.125" "angle" "-35" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2690.875 4020.875 288.125" "angle" "-125" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2737.126 4004.875 296.125" "angle" "-72" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3026.875 4004.874 296.125" "angle" "-122" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3026.874 3363.126 296.125" "angle" "135" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2737.127 3363.125 296.125" "angle" "68" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1878.757 3109.573 280.125" "angle" "-1" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2754.875 3316.875 280.125" "angle" "-142" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3006.875 2932.875 280.125" "angle" "-159" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "3006.875 2585.125 280.125" "angle" "137" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "2713.391 2585.125 280.125" "angle" "93" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1951.125 2492.473 298.449" "angle" "63" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1928.875 4672.875 275.826" "angle" "-133" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1920.875 4267.125 275.895" "angle" "128" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1873.101 3708.875 280.125" "angle" "-177" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1577.215 3458.477 292.211" "angle" "168" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1263.125 3244.896 326.486" "angle" "64" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "911.125 5080.873 516.125" "angle" "-34" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "911.125 4895.125 512.125" "angle" "39" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "1056.873 5080.875 516.125" "angle" "-93" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "991.126 4353.306 512.125" "angle" "-88" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "800.873 4120.875 512.125" "angle" "-143" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "368.875 4152.875 387.004" "angle" "-127" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "79.613 4184.875 376.125" "angle" "-105" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "-216.875 4184.875 415.179" "angle" "-92" "targetname" (local.team1 + "_spawn")
	spawn ("info_player_" + local.team1) "origin" "-696.875 4196.875 380.605" "angle" "-68" "targetname" (local.team1 + "_spawn")

	spawn ("info_player_" + local.team2) "origin" "1663.125 -5232.875 134.230" "angle" "52" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "1605.773 -4128.383 504.125" "angle" "-15" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "1793.124 -4027.126 504.125" "angle" "-32" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "2708.540 -4027.127 504.125" "angle" "-26" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "2890.566 -5232.875 134.230" "angle" "83" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "4347.873 -5232.875 134.230" "angle" "122" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "3518.981 -4595.192 354.606" "angle" "85" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "3983.125 -4151.643 392.125" "angle" "56" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "4339.874 -4095.347 392.125" "angle" "123" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "3909.739 -3526.852 392.125" "angle" "106" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "2977.328 -4159.552 504.125" "angle" "24" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "2715.128 -3740.875 504.125" "angle" "69" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "2293.385 -3644.875 504.125" "angle" "9" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "2412.511 -3551.126 504.125" "angle" "-9" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "1849.125 -3111.764 435.325" "angle" "57" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "2027.181 -3104.875 452.820" "angle" "89" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "783.129 -2783.125 392.125" "angle" "-2" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "1367.000 -2824.873 392.125" "angle" "57" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "783.126 -2336.875 392.125" "angle" "114" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "79.125 -2328.875 392.125" "angle" "69" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "688.875 -2423.125 408.125" "angle" "-159" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "688.875 -2776.875 408.125" "angle" "142" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "143.127 -2776.875 408.125" "angle" "57" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "143.126 -2423.125 408.125" "angle" "-42" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-783.125 -2300.769 392.125" "angle" "91" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-783.128 -2428.875 648.125" "angle" "112" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-1259.125 -2490.875 648.125" "angle" "103" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-1699.125 -2568.875 648.125" "angle" "106" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-2175.126 -2770.875 648.125" "angle" "115" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-1996.051 -3081.129 648.125" "angle" "-175" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-1668.875 -2801.126 648.125" "angle" "-61" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-1228.875 -2723.126 648.125" "angle" "-74" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-783.125 -2723.127 648.125" "angle" "-150" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-816.690 -3250.105 648.125" "angle" "168" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-881.488 -3355.125 205.858" "angle" "-166" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-1329.614 -4081.393 36.125" "angle" "151" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-1753.966 -4769.112 19.621" "angle" "150" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-2238.200 -5551.875 -423.945" "angle" "123" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-3485.490 -5552.875 -424.508" "angle" "96" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-3791.125 -5616.875 -460.776" "angle" "117" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-4272.874 -5616.875 -460.778" "angle" "62" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-4815.125 -5616.875 -460.778" "angle" "106" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5056.875 -5616.875 -460.777" "angle" "52" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5056.875 -5071.125 -151.281" "angle" "-16" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5424.873 -4784.875 10.689" "angle" "34" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-2804.006 -3353.502 206.140" "angle" "112" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5936.875 -4656.875 36.125" "angle" "36" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-6448.874 -4528.875 36.125" "angle" "31" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-6960.875 -4400.874 36.125" "angle" "30" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-7088.873 -4016.875 36.125" "angle" "26" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-7277.583 -3504.875 36.125" "angle" "23" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-6991.125 -4559.125 36.125" "angle" "-174" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-6479.188 -4687.125 36.125" "angle" "-171" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-7471.875 -4719.875 36.125" "angle" "40" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-7247.125 -4047.126 36.125" "angle" "-118" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-7375.125 -3833.188 36.125" "angle" "-92" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-7037.625 -2697.214 36.125" "angle" "-3" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-6763.713 -1775.267 36.125" "angle" "-34" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5991.231 -1775.635 41.380" "angle" "-35" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-3985.407 -1777.974 286.311" "angle" "-33" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-4887.229 -4839.422 -20.221" "angle" "60" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-2541.107 -2615.717 360.463" "angle" "52" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "4339.873 -3207.153 392.125" "angle" "133" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "3292.288 -2683.770 392.264" "angle" "114" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-3775.413 -1029.204 392.125" "angle" "-172" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-4276.293 -758.764 392.125" "angle" "-171" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-4761.235 -516.293 392.125" "angle" "-64" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-6720.700 -1630.491 392.125" "angle" "-11" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-6489.677 -852.901 392.125" "angle" "-18" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-6160.874 1231.359 392.125" "angle" "-70" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-6160.875 384.625 392.125" "angle" "-12" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5649.357 612.229 392.125" "angle" "-119" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5578.481 489.469 392.125" "angle" "-175" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5587.697 -142.784 392.125" "angle" "-16" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5436.606 -707.216 392.125" "angle" "-21" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5997.220 -351.408 392.125" "angle" "-98" "targetname" (local.team2 + "_spawn")
	spawn ("info_player_" + local.team2) "origin" "-5492.947 -1341.560 392.125" "angle" "2" "targetname" (local.team2 + "_spawn")
end

////////////////////////////////////////////////////////////////////////

teleporter_exploder_spawn1:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 9) { local.exploder = $exploder[local.e] }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	exec map_triggers/tele.scr ( -1935 -1543 392 ) ( -1935 -1513 544 ) 0
end

teleporter_exploder_spawn2:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 6) { local.exploder = $exploder[local.e] }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	exec map_triggers/tele.scr ( 1904 -1639 392 ) ( 1904 -1609 544 ) 0
end

teleporter_exploder_spawn3:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 101) { local.exploder = $exploder[local.e] }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	exec map_triggers/tele.scr ( -366 1048 272 ) ( -400 203 400 ) 0
	exec map_triggers/tele.scr ( -472 488 296 ) ( -400 1377 395 ) 0
end

teleporter_exploder_spawn4: // also remove spotlight & spotlight_colorswitch.

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 103) { local.exploder = $exploder[local.e] }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	exec map_triggers/tele.scr ( 375 1730 848 ) ( 335 1730 568 ) 1

	if($s0 != NULL && $s0.model == "models/miscobj/searchlightbase.tik") { $s0 remove }
	if($s_colorswitch_s0 != NULL) { $s_colorswitch_s0 remove }
	if($s_colorswitchtrig_s0 != NULL) { $s_colorswitchtrig_s0 remove }
end

teleporter_exploder_spawn5:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 102) { local.exploder = $exploder[local.e] }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	exec map_triggers/tele.scr ( -908 39 190 ) ( -934 -15 392 ) 0

	if($bridge_detonator != NULL)
	{
		$bridge_detonator.origin += ( 0 -70 -10 )
		$bridge_detonatortrig.origin += ( 0 -70 -10 )
	}
end

UBER_teleporters:

	exec map_triggers/tele.scr ( -2239 -1313 392 ) ( -2209 -1310 916 ) 0
	exec map_triggers/tele.scr ( -1632 -1309 392 ) ( -1679 -1311 934 ) 0
	exec map_triggers/tele.scr ( 1600 -1413 392 ) ( 1633 -1412 919 ) 0
	exec map_triggers/tele.scr ( 2207 -1408 392 ) ( 2137 -1402 956 ) 0

	exec map_triggers/tele.scr ( 4520 1717 1220 ) ( 4945 1584 1348 ) 1
	exec map_triggers/tele.scr ( 5011 1356 1348 ) ( 4577 1359 1540 ) 1
	exec map_triggers/tele.scr ( 4724 835 1220 ) ( 4818 946 1540 ) 1
	exec map_triggers/tele.scr ( 4970 431 1220 ) ( 5099 462 1348 ) 0
	exec map_triggers/tele.scr ( 5333 50 1348 ) ( 5409 57 1540 ) 0
	exec map_triggers/tele.scr ( 5545 -453 1220 ) ( 5637 -354 1540 ) 1
	exec map_triggers/tele.scr ( 5793 -866 1220 ) ( 5918 -831 1348 ) 0
	exec map_triggers/tele.scr ( 6157 -1235 1348 ) ( 6297 -1218 1412 ) 0
	exec map_triggers/tele.scr ( 6407 -1407 1412 ) ( 7316 -1108 1540 ) 1
	exec map_triggers/tele.scr ( 7191 -1621 1220 ) ( 7314 -1581 1540 ) 1
	exec map_triggers/tele.scr ( 7190 -2102 1220 ) ( 7319 -2137 1348 ) 0
	exec map_triggers/tele.scr ( 7311 -2614 1348 ) ( 7381 -2644 1540 ) 0
	exec map_triggers/tele.scr ( 7240 -3157 1220 ) ( 7380 -3116 1540 ) 0
	exec map_triggers/tele.scr ( 7250 -3638 1220 ) ( 7382 -3676 1348 ) 0
	exec map_triggers/tele.scr ( 7380 -4139 1348 ) ( 7512 -4184 1412 ) 0
	exec map_triggers/tele.scr ( 6819 -3496 1104 ) ( 7240 -3497 1220 ) 1
	exec map_triggers/tele.scr ( 6529 -1613 1412 ) ( 6759 -1955 1104 ) 1
	exec map_triggers/tele.scr ( 6628 -2461 784 ) ( 6760 -2420 1104 ) 0
	exec map_triggers/tele.scr ( 6633 -2942 784 ) ( 6761 -2976 912 ) 0
	exec map_triggers/tele.scr ( 6758 -3454 912 ) ( 6821 -3509 1104 ) 0
	exec map_triggers/tele.scr ( 6694 -3997 960 ) ( 6823 -3949 1104 ) 0
	exec map_triggers/tele.scr ( 6821 -4519 912 ) ( 6693 -4465 960 ) 0
	exec map_triggers/tele.scr ( 6950 -5033 848 ) ( 6821 -4982 912 ) 0
	exec map_triggers/tele.scr ( 6642 -5898 848 ) ( 6380 -5783 980 ) 1
	exec map_triggers/tele.scr ( 5897 -5785 980 ) ( 5862 -5906 1028 ) 0
	exec map_triggers/tele.scr ( 5392 -5918 1028 ) ( 5346 -6037 1092 ) 0
	exec map_triggers/tele.scr ( 4879 -6040 1092 ) ( 4837 -5903 1220 ) 0
	exec map_triggers/tele.scr ( 4362 -5924 1220 ) ( 4368 -6064 1264 ) 0
	exec map_triggers/tele.scr ( 3668 -6011 1264 ) ( 3643 -5886 1392 ) 0
	exec map_triggers/tele.scr ( 2646 -5955 1356 ) ( 2620 -5842 1484 ) 0
	exec map_triggers/tele.scr ( -6709 -4400 36 ) ( -6715 -4624 836 ) 0
	exec map_triggers/tele.scr ( -6479 -4629 836 ) ( -6443 -4757 964 ) 0
	exec map_triggers/tele.scr ( -5967 -4761 964 ) ( -5929 -4881 1092 ) 0
	exec map_triggers/tele.scr ( -5455 -4887 1092 ) ( -5421 -5009 1220 ) 0
	exec map_triggers/tele.scr ( -7194 -4039 1092 ) ( -7318 -3988 1156 ) 0
	exec map_triggers/tele.scr ( -6964 -4629 836 ) ( -7188 -4532 1092 ) 1
	exec map_triggers/tele.scr ( -4947 -5020 1220 ) ( -4947 -5849 1028 ) 1
	exec map_triggers/tele.scr ( -4784 -5723 900 ) ( -4815 -5855 1028 ) 0
	exec map_triggers/tele.scr ( -5298 -5850 1028 ) ( -5331 -5984 1092 ) 0
	exec map_triggers/tele.scr ( -3760 -5784 1028 ) ( -3794 -5855 1220 ) 0
	exec map_triggers/tele.scr ( -4303 -5721 900 ) ( -4272 -5844 1220 ) 1
	exec map_triggers/tele.scr ( -5278 -1828 1200 ) ( -7315 -3633 1156 ) 1
	exec map_triggers/tele.scr ( -2558 -3043 1508 ) ( -3279 -5789 1028 ) 1
	exec map_triggers/tele.scr ( 3065 -3984 1240 ) ( 2133 -5836 1484 ) 1

	exec map_triggers/tele.scr ( 5118 6246 840 ) ( 5287 6383 964 ) 1
	exec map_triggers/tele.scr ( 4829 6042 657 ) ( 4863 6069 840 ) 0
	exec map_triggers/tele.scr ( 4590 5431 616 ) ( 4596 5438 728 ) 0
	exec map_triggers/tele.scr ( 4449 5350 616 ) ( 4350 5292 852 ) 0
	exec map_triggers/tele.scr ( 3841 7107 593 ) ( 3781 7078 808 ) 0
	exec map_triggers/tele.scr ( 3602 6484 337 ) ( 3599 6515 544 ) 0
	exec map_triggers/tele.scr ( 3510 6562 699 ) ( 3434 6523 768 ) 0
	exec map_triggers/tele.scr ( 3346 6407 768 ) ( 3244 6355 894 ) 0
	exec map_triggers/tele.scr ( 2251 6848 858 ) ( 1864 6848 817 ) 1
	exec map_triggers/tele.scr ( 3320 5655 584 ) ( 3311 5533 780 ) 0
	exec map_triggers/tele.scr ( 3260 5395 840 ) ( 3320 5373 961 ) 0
	exec map_triggers/tele.scr ( 3603 5469 672 ) ( 3603 5450 840 ) 0
	exec map_triggers/tele.scr ( 4708 5995 408 ) ( 4708 5995 728 ) 1
	exec map_triggers/tele.scr ( 1408 6204 542 ) ( 1476 6241 858 ) 0
	exec map_triggers/tele.scr ( 415 4508 908 ) ( 741 4506 1188 ) 0
	exec map_triggers/tele.scr ( 415 4206 908 ) ( 348 4203 1234 ) 0
	exec map_triggers/tele.scr ( 3048 5419 605 ) ( 3097 5437 780 ) 0
	exec map_triggers/tele.scr ( 3012 5322 552 ) ( 3128 5358 716 ) 0
	exec map_triggers/tele.scr ( 1864 6735 817 ) ( 1476 6848 858 ) 1
	exec map_triggers/tele.scr ( 2951 4923 552 ) ( 3026 4843 716 ) 0
	exec map_triggers/tele.scr ( 2890 4660 556 ) ( 2931 4675 716 ) 0
	exec map_triggers/tele.scr ( 2890 4403 556 ) ( 2738 4364 808 ) 1
	exec map_triggers/tele.scr ( 3004 4403 716 ) ( 3004 4352 1219 ) 0
	exec map_triggers/tele.scr ( 2692 4059 808 ) ( 2818 3572 712 ) 1
	exec map_triggers/tele.scr ( 2818 3466 712 ) ( 2818 3466 1087 ) 0
	exec map_triggers/tele.scr ( 2749 2951 1161 ) ( 2414 2685 927 ) 1
	exec map_triggers/tele.scr ( 2059 4043 836 ) ( 2011 4001 1008 ) 0
	exec map_triggers/tele.scr ( 1909 4043 712 ) ( 1902 3943 814 ) 0
	exec map_triggers/tele.scr ( 2093 4688 831 ) ( 2049 4778 890 ) 0
	exec map_triggers/tele.scr ( 1270 3217 982 ) ( 1259 3218 1116 ) 0
	exec map_triggers/tele.scr ( 1259 2551 964 ) ( 1259 2551 1116 ) 0
	exec map_triggers/tele.scr ( 700 3268 416 ) ( 736 3270 668 ) 0
	exec map_triggers/tele.scr ( -139 4200 406 ) ( -139 4200 1079 ) 0
	exec map_triggers/tele.scr ( -643 4142 1020 ) ( -812 4064 780 ) 1
	exec map_triggers/tele.scr ( -1524 3588 618 ) ( -1559 3584 1101 ) 0
	exec map_triggers/tele.scr ( -1215 2312 392 ) ( -1180 2288 600 ) 0
	exec map_triggers/tele.scr ( -2252 1668 1252 ) ( -2253 1667 392 ) 1
	exec map_triggers/tele.scr ( 977 1785 1120 ) ( 977 1776 1493 ) 1

	exec map_triggers/tele.scr ( 571 -233 392 ) ( 571 -233 576 ) 0
	exec map_triggers/tele.scr ( -1143 -1129 392 ) ( -1192 -1073 576 ) 0
	exec map_triggers/tele.scr ( -2415 -1048 408 ) ( -2396 -1056 669 ) 0
	exec map_triggers/tele.scr ( 2990 1796 1220 ) ( 3032 1796 1348 ) 0
	exec map_triggers/tele.scr ( 3502 1801 1348 ) ( 3542 1841 1540 ) 0
	exec map_triggers/tele.scr ( 4045 1723 1220 ) ( 4010 1839 1540 ) 1
	exec map_triggers/tele.scr ( 1913 1797 1023 ) ( 1999 1798 1156 ) 0
	exec map_triggers/tele.scr ( 2450 -3812 1112 ) ( 2435 -3922 1240 ) 0
	exec map_triggers/tele.scr ( 2172 -3993 910 ) ( 2337 -3919 1240 ) 0
	exec map_triggers/tele.scr ( 1614 -3786 1240 ) ( 1764 -3988 907 ) 1
	exec map_triggers/tele.scr ( 2511 -3324 504 ) ( 2471 -3325 920 ) 0
	exec map_triggers/tele.scr ( 1939 -3136 790 ) ( 1718 -2889 749 ) 0
	exec map_triggers/tele.scr ( 1401 -2889 745 ) ( 1315 -2736 801 ) 0
	exec map_triggers/tele.scr ( 1359 -2557 392 ) ( 1318 -2556 920 ) 0
	exec map_triggers/tele.scr ( 1009 -3360 1140 ) ( 1256 -3778 1240 ) 1
	exec map_triggers/tele.scr ( 460 -2982 1140 ) ( -78 -2974 1480 ) 1
	exec map_triggers/tele.scr ( 756 -2824 985 ) ( 742 -3009 1159 ) 0
	exec map_triggers/tele.scr ( 262 -2517 1197 ) ( 181 -2518 1304 ) 0
	exec map_triggers/tele.scr ( -2295 -2770 648 ) ( -2295 -2770 1235 ) 0
	exec map_triggers/tele.scr ( -2175 -2890 1355 ) ( -2125 -2817 1492 ) 0
	exec map_triggers/tele.scr ( -1259 -2660 1332 ) ( -1212 -2655 1536 ) 0
	exec map_triggers/tele.scr ( -5289 656 392 ) ( -5359 620 679 ) 0
	exec map_triggers/tele.scr ( -5533 493 828 ) ( -5502 426 1040 ) 0
	exec map_triggers/tele.scr ( -5621 609 841 ) ( -5558 870 1064 ) 0
	exec map_triggers/tele.scr ( -5400 24 1038 ) ( -5587 -233 1140 ) 1
	exec map_triggers/tele.scr ( -4313 -226 392 ) ( -4348 -291 700 ) 0
	exec map_triggers/tele.scr ( -1322 -504 392 ) ( -1342 -611 840 ) 0
	exec map_triggers/tele.scr ( 73 -2657 1256 ) ( -63 -2654 1480 ) 0

	local.trig = exec map_triggers/tele.scr ( -111 -529 392 ) ( -76 -531 790 ) 0 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 2
	local.trig = exec map_triggers/tele.scr ( 1717 -460 392 ) ( 1716 -529 640 ) 0 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 4
	local.trig = exec map_triggers/tele.scr ( 330 -1160 392 ) ( 330 -1189 807 ) 0 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 7
	local.trig = exec map_triggers/tele.scr ( 268 -1202 821 ) ( 166 -1193 917 ) 0 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 7
	local.trig = exec map_triggers/tele.scr ( -728 -1391 392 ) ( -786 -1393 811 ) 0 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 8
	local.trig = exec map_triggers/tele.scr ( 2538 -917 720 ) ( 2559 -929 948 ) 0 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 5
	local.trig = exec map_triggers/tele.scr ( 1035 -184 642 ) ( 934 -168 735 ) 0 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 3
	local.trig = exec map_triggers/tele.scr ( -1243 -614 840 ) ( -1156 -566 964 ) 0 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 1
end

UBER_teleporters_2:

	exec map_triggers/undermap.scr ( 2048 -1536 -512 ) ( -3712 -8000 -300 ) ( 0 0 1 ) undermap_tele1 0 1 // origin, setsize1, setsize2, targetname, outside (1 = "you fell outside the map"), kill player (1 = yes).
	exec map_triggers/undermap.scr ( 2048 -1536 128 ) ( -8000 0 -300 ) ( 0 8000 1 ) undermap_tele2 0 1
	exec map_triggers/undermap.scr ( 2048 -1536 128 ) ( 0 -8000 -300 ) ( 8000 8000 1 ) undermap_tele3 0 1	// for some reason, simply respawning players across the map may cause them lag, and cause their game to freeze/crash.
	exec map_triggers/undermap.scr ( 0 4000 128 ) ( -8000 0 -300 ) ( 8000 8000 1 ) undermap_tele4 0 1
	exec map_triggers/undermap.scr ( -7486 -6079 36 ) ( -300 -100 -600 ) ( 2032 1329 1 ) undermap_tele5 0 1
	exec map_triggers/undermap.scr ( -7486 -6079 36 ) ( -300 -100 -600 ) ( 2399 1265 1 ) undermap_tele6 0 1
	exec map_triggers/undermap.scr ( -7486 -6079 36 ) ( -300 -100 -600 ) ( 5586 433 1 ) undermap_tele7 0 1

	local.trig = exec map_triggers/tele.scr ( -1040 -1499 392 ) ( -1079 -1498 392 ) 1 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	//local.trig.targetname = "red_tele"
	local.trig.set = 8
	//local.trig.trigger2.targetname = "red_tele" // teles need the "red_tele" targetname for global/exploder.scr to remove them when the #set explodes.
	local.trig.trigger2.set = 8

	local.trig = exec map_triggers/tele.scr ( 2021 -664 392 ) ( 2021 -822 392 ) 1 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 5
	local.trig.trigger2.set = 5
	local.trig = exec map_triggers/tele.scr ( 435 -1579 392 ) ( 435 -1440 392 ) 1 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 7
	local.trig.trigger2.set = 7
	local.trig = exec map_triggers/tele.scr ( 375 1730 848 ) ( 307 1730 912 ) 1 ( -10 -10 -10 ) ( 10 10 0 ) "fx/corona_red.tik" 1.5 "red_tele"
	local.trig.set = 103
	local.trig.trigger2.set = 103

	exec map_triggers/tele.scr ( 3978 5848 168 ) ( 4119 5957 356 ) 0
	exec map_triggers/tele.scr ( 3832 6045 170 ) ( 3801 6025 157 ) 0
	exec map_triggers/tele.scr ( 4369 5832 728 ) ( 4521 5929 856 ) 0
	exec map_triggers/tele.scr ( 4831 5571 728 ) ( 4597 5436 728 ) 0
	exec map_triggers/tele.scr ( 928 5432 600 ) ( 971 5427 240 ) 1
	exec map_triggers/tele.scr ( 911 5080 516 ) ( 795 5076 680 ) 1
	exec map_triggers/tele.scr ( 795 4895 680 ) ( 741 4935 857 ) 0
	exec map_triggers/tele.scr ( 871 6176 384 ) ( 871 6176 576 ) 0
	exec map_triggers/tele.scr ( 445 4895 680 ) ( 417 4864 910 ) 0
	exec map_triggers/tele.scr ( -1313 3694 873 ) ( -1566 3739 1105 ) 0
	exec map_triggers/tele.scr ( -1640 3699 1152 ) ( -1666 3653 1262 ) 0
	exec map_triggers/tele.scr ( 700 4864 864 ) ( 700 4935 897 ) 1
	exec map_triggers/tele.scr ( 760 4120 512 ) ( 756 4160 864 ) 1
	exec map_triggers/tele.scr ( 748 3050 668 ) ( 748 2796 668 ) 1
	exec map_triggers/tele.scr ( 748 2555 668 ) ( 782 2897 1116 ) 1
	exec map_triggers/tele.scr ( 3603 4970 840 ) ( 4027 5129 810 ) 1
	exec map_triggers/tele.scr ( 2809 5636 221 ) ( 2906 5636 360 ) 1
	exec map_triggers/tele.scr ( 3008 5580 344 ) ( 2866 5530 660 ) 1
	exec map_triggers/tele.scr ( 3008 5351 344 ) ( 3055 5325 408 ) 1
	exec map_triggers/tele.scr ( 3030 3939 296 ) ( 3030 3939 504 ) 1
	exec map_triggers/tele.scr ( 2818 3347 712 ) ( 2817 3371 504 ) 1
	exec map_triggers/tele.scr ( 2997 3330 296 ) ( 2996 3381 504 ) 0
	exec map_triggers/tele.scr ( 2977 3347 1240 ) ( 2977 3333 1384 ) 0
	exec map_triggers/tele.scr ( 1904 2419 628 ) ( 1951 2448 688 ) 1
	exec map_triggers/tele.scr ( 2411 2114 688 ) ( 2375 2186 991 ) 1
	exec map_triggers/tele.scr ( 1607 2063 400 ) ( 1607 2063 628 ) 1
	exec map_triggers/tele.scr ( 1904 2045 628 ) ( 1849 2051 1075 ) 1
	exec map_triggers/tele.scr ( 2116 5520 260 ) ( 2116 5520 468 ) 1
	exec map_triggers/tele.scr ( 2256 4696 448 ) ( 2257 4751 468 ) 1
	exec map_triggers/tele.scr ( 2576 4983 468 ) ( 2576 5079 468 ) 1
	exec map_triggers/tele.scr ( 1932 4333 280 ) ( 1971 4333 448 ) 1
	exec map_triggers/tele.scr ( 2248 4263 448 ) ( 2248 4263 713 ) 1
	exec map_triggers/tele.scr ( 2576 5468 468 ) ( 2546 5468 760 ) 1
	exec map_triggers/tele.scr ( 1840 3780 280 ) ( 1879 3780 472 ) 1
	exec map_triggers/tele.scr ( 1960 3708 280 ) ( 1960 3747 472 ) 1
	exec map_triggers/tele.scr ( 2244 4090 280 ) ( 2287 4090 280 ) 0
	exec map_triggers/tele.scr ( 451 3315 489 ) ( 492 3268 496 ) 1
	exec map_triggers/tele.scr ( 2921 6498 168 ) ( 2921 6475 336 ) 1
	exec map_triggers/tele.scr ( 3360 6359 168 ) ( 3356 6312 181 ) 1
	exec map_triggers/tele.scr ( 3591 5531 173 ) ( 3544 5533 168 ) 1
	exec map_triggers/tele.scr ( 871 6176 576 ) ( 921 6133 807 ) 1
	exec map_triggers/tele.scr ( 1200 1992 656 ) ( 1255 1992 628 ) 1
	exec map_triggers/tele.scr ( 704 1727 848 ) ( 751 1726 880 ) 1
	exec map_triggers/tele.scr ( 751 1543 880 ) ( 802 1616 1120 ) 1
	exec map_triggers/tele.scr ( 1247 1847 1033 ) ( 1200 1849 1120 ) 1
	exec map_triggers/tele.scr ( 312 1851 568 ) ( 359 1850 568 ) 1
	exec map_triggers/tele.scr ( 312 1602 568 ) ( 359 1602 568 ) 1
	exec map_triggers/tele.scr ( -696 4149 396 ) ( -751 4150 387 ) 1
	exec map_triggers/tele.scr ( -872 3095 378 ) ( -943 3098 377 ) 1
	exec map_triggers/tele.scr ( -1091 2998 382 ) ( -1096 2829 600 ) 0
	exec map_triggers/tele.scr ( -1152 2482 392 ) ( -1191 2484 392 ) 1
	exec map_triggers/tele.scr ( -1037 2914 600 ) ( -927 2911 824 ) 0
	//exec map_triggers/tele.scr ( -1279 1844 392 ) ( -1238 2135 392 ) 1
	exec map_triggers/tele.scr ( -815 2143 392 ) ( -760 2141 392 ) 1
	exec map_triggers/tele.scr ( -888 2735 784 ) ( -951 2735 784 ) 1
	exec map_triggers/tele.scr ( -1224 1927 416 ) ( -1224 1768 392 ) 1
	exec map_triggers/tele.scr ( -1287 1575 392 ) ( -792 1575 392 ) 1
	exec map_triggers/tele.scr ( -1920 1666 392 ) ( -1959 1667 392 ) 1
	exec map_triggers/tele.scr ( -1119 1703 644 ) ( -1120 1656 644 ) 1
	exec map_triggers/tele.scr ( -1224 1656 644 ) ( -1279 1657 392 ) 0
	exec map_triggers/tele.scr ( 2667 2538 384 ) ( 2644 2585 301 ) 1
	exec map_triggers/tele.scr ( 1904 1927 400 ) ( 1951 1925 384 ) 1
	exec map_triggers/tele.scr ( 128 1575 399 ) ( 1439 1560 416 ) 1
	exec map_triggers/tele.scr ( -1040 1607 644 ) ( -1040 1607 813 ) 1
	exec map_triggers/tele.scr ( -1144 2088 416 ) ( -1183 2088 416 ) 1
	exec map_triggers/tele.scr ( 3055 5527 168 ) ( 3055 5250 408 ) 0
	exec map_triggers/tele.scr ( 3055 4983 408 ) ( 3008 4986 245 ) 1
	exec map_triggers/tele.scr ( 1512 2543 464 ) ( 1464 2543 798 ) 0
	exec map_triggers/tele.scr ( 4488 5609 616 ) ( 4530 5634 408 ) 1
	exec map_triggers/tele.scr ( -1197 2722 392 ) ( -1132 2722 784 ) 0
	exec map_triggers/tele.scr ( 880 5119 528 ) ( 911 5080 516 ) 0
	exec map_triggers/tele.scr ( 880 5272 528 ) ( 928 5303 600 ) 0
	exec map_triggers/tele.scr ( -1005 4208 363 ) ( -1192 4433 610 ) 0
	exec map_triggers/tele.scr ( -1192 4280 618 ) ( -1225 4215 618 ) 1
	exec map_triggers/tele.scr ( -1294 3367 376 ) ( -1461 3367 618 ) 0
	exec map_triggers/tele.scr ( -663 4696 610 ) ( 979 6225 350 ) 1
	exec map_triggers/tele.scr ( -7377 -3841 36 ) ( -7274 -3502 36 ) 1
	exec map_triggers/tele.scr ( -6046 1035 392 ) ( -6050 1123 824 ) 1
	exec map_triggers/tele.scr ( 375 4856 840 ) ( 420 4856 908 ) 1
	exec map_triggers/tele.scr ( 24 4168 784 ) ( 24 4231 840 ) 1
	exec map_triggers/tele.scr ( -601 4696 840 ) ( -601 4696 1029 ) 1
	exec map_triggers/tele.scr ( 762 -1263 392 ) ( 762 -1263 560 ) 1
	exec map_triggers/tele.scr ( 1304 6223 224 ) ( 1234 6231 350 ) 0
	exec map_triggers/tele.scr ( -1224 2088 644 ) ( -1232 2088 1064 ) 1
	exec map_triggers/tele.scr ( 183 1663 568 ) ( 183 1663 392 ) 1
	exec map_triggers/tele.scr ( 359 1770 392 ) ( 312 1770 392 ) 1
	exec map_triggers/tele.scr ( 972 1992 880 ) ( 880 1992 656 ) 1
	exec map_triggers/tele.scr ( 1903 4220 277 ) ( 1864 4220 277 ) 0

	exec map_triggers/tele.scr ( -881 -3355 205 ) ( -855 -3312 648 ) 1
	//exec map_triggers/tele.scr ( 3983 -4151 392 ) ( 3949 -4137 504 ) 0
	exec map_triggers/tele.scr ( -3730 2169 424 ) ( -5361 3312 392 ) 1
	exec map_triggers/tele.scr ( 4367 -5299 424 ) ( 4367 -5556 416 ) 1
	exec map_triggers/tele.scr ( -2799 -3020 279 ) ( -2757 -3022 648 ) 1
	exec map_triggers/tele.scr ( -783 -2300 392 ) ( -783 -2338 648 ) 1
	exec map_triggers/tele.scr ( -1228 -2723 648 ) ( -1259 -2490 648 ) 1
	exec map_triggers/tele.scr ( 143 -2776 408 ) ( -783 -2756 648 ) 1
	exec map_triggers/tele.scr ( 215 -2423 408 ) ( 217 -2328 392 ) 1
	exec map_triggers/tele.scr ( 688 -2776 408 ) ( 783 -2783 392 ) 1
	exec map_triggers/tele.scr ( 1703 -2824 392 ) ( 1701 -2879 396 ) 1
	exec map_triggers/tele.scr ( -6479 -4687 36 ) ( -6448 -4528 36 ) 1
	exec map_triggers/tele.scr ( -6160 1234 392 ) ( -6160 1857 392 ) 1
	exec map_triggers/tele.scr ( -6763 -1775 36 ) ( -6747 -1721 392 ) 1
	exec map_triggers/tele.scr ( -6225 34 392 ) ( -6202 88 392 ) 1
	exec map_triggers/tele.scr ( -4761 -516 392 ) ( -4646 -219 392 ) 1
	exec map_triggers/tele.scr ( -5649 612 392 ) ( -5359 779 392 ) 1
	//exec map_triggers/tele.scr ( -2620 -1095 392 ) ( -2622 -1048 408 ) 0
	exec map_triggers/tele.scr ( -7 -233 392 ) ( 22 -262 392 ) 1
	exec map_triggers/tele.scr ( 476 -184 392 ) ( 477 -223 392 ) 1
	exec map_triggers/tele.scr ( 545 -1228 392 ) ( 547 -1263 392 ) 1
	exec map_triggers/tele.scr ( -7 -1136 392 ) ( -8 -1175 392 ) 1
	exec map_triggers/tele.scr ( -1315 -1092 392 ) ( -1315 -1131 392 ) 1
	exec map_triggers/tele.scr ( -864 -1109 392 ) ( -903 -1141 392 ) 1
	exec map_triggers/tele.scr ( -1261 -728 392 ) ( -1198 -728 392 ) 1
	exec map_triggers/tele.scr ( -1083 -855 392 ) ( -1083 -808 392 ) 1
	exec map_triggers/tele.scr ( -1083 -559 408 ) ( -1083 -520 392 ) 1
	exec map_triggers/tele.scr ( -1469 -649 392 ) ( -1422 -651 392 ) 1
	exec map_triggers/tele.scr ( 1110 -516 392 ) ( 1110 -563 392 ) 1
	exec map_triggers/tele.scr ( 1019 -278 392 ) ( 948 -278 392 ) 1
	exec map_triggers/tele.scr ( 825 -143 392 ) ( 825 -96 392 ) 1
	exec map_triggers/tele.scr ( 852 -447 392 ) ( 853 -408 392 ) 1

	exec map_triggers/tele.scr ( 6379 -3188 190 ) ( 6333 -3012 416 ) 0
	exec map_triggers/tele.scr ( -5166 2308 190 ) ( -5237 2290 392 ) 0

	thread teleporter_exploder_spawn1
	thread teleporter_exploder_spawn2
	thread teleporter_exploder_spawn3
	thread teleporter_exploder_spawn4
	thread teleporter_exploder_spawn5

if(getcvar("g_ubergametype") != "bb")
{
}
end

lasers_exploder_adjust local.set:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == local.set) { local.exploder = $exploder[local.e] }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	for(local.s = 1; local.s <= $spawnlaser.size; local.s++)
	{
		if($spawnlaser[local.s].set == local.set) { $spawnlaser[local.s] endpoint $spawnlaser[local.s].newendpoint }
	}
end

lasers_exploder_add1:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 2) { local.exploder = $exploder[local.e] }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	thread spawnlaser ( -96 -615 393 ) ( -96 -424 569 ) ( 0 1 0 ) 0.5
end

lasers_exploder_add2:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 7) { local.exploder = $exploder[local.e] }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	thread spawnlaser ( -45 -1432 393 ) ( 219 -1367 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( 219 -1367 393 ) ( 280 -1308 497 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( 280 -1308 497 ) ( 3 -1308 657 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( 3 -1308 657 ) ( -52 -1362 560 ) ( 0 1 0 ) 0.5
end

lasers_exploder_add3:

	for(local.e = 1; local.e <= $exploder.size; local.e++)
	{
		if($exploder[local.e].set == 1) { local.exploder = $exploder[local.e] }
	}

	while(local.exploder != NIL && local.exploder != NULL && local.exploder.exploded != 1) { waitframe }

	thread spawnlaser ( -1099 -732 409 ) ( -1009 -806 576 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -1099 -732 409 ) ( -788 -717 462 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -1009 -806 576 ) ( -866 -787 578 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -788 -717 462 ) ( -866 -787 578 ) ( 0 1 0 ) 0.5
end

UBER_mapextras_2:

	exec maps/gen_mapscripts/mapwall.scr ( -3263 -5567 0 ) ( -1900 -5567 0 ) 1000 0 15 0
	exec maps/gen_mapscripts/mapwall.scr ( -5072 -5056 0 ) ( -5072 -5631 0 ) 1000 0 15 0

	exec maps/gen_mapscripts/mapwall.scr ( -7679 -6079 1800 ) ( -7679 -2900 1800 ) 3000 0 192 0 // extend into right side
	exec maps/gen_mapscripts/mapwall.scr ( -6464 -4735 400 ) ( -7700 -4735 400 ) 1000 0 0 15 // extend into left side

	exec maps/gen_mapscripts/mapwall.scr ( 4354 -5248 424 ) ( 1000 -5248 424 ) 1000 0 0 15

	thread cratesstuff vehicles/higginsxtrahull.tik ( 4510 5837 344 ) ( 0 300 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 4655 5910 344 ) ( 0 300 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 4820 5620 344 ) ( 0 210 0 ) 1

	thread cratesstuff vehicles/higginsxtrahull.tik ( 3782 6936 479 ) ( 0 116 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 3614 6852 479 ) ( 0 116 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 3520 6808 479 ) ( 0 116 0 ) 1

	thread cratesstuff vehicles/higginsxtrahull.tik ( 1311 6600 286 ) ( 0 90 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 989 6316 286 ) ( 0 180 0 ) 1
	thread cratesstuff static/indycrate.tik ( 1194 6434 303 ) ( 0 135 0 ) 1
	thread cratesstuff static/banquet_table.tik ( 1296 6311 305 ) ( 0 -152 0 ) 1

	thread cratesstuff vehicles/higginsxtrahull.tik ( 550 4500 800 ) ( 0 90 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 700 4500 800 ) ( 0 90 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 850 4500 800 ) ( 0 90 0 ) 1

	thread cratesstuff vehicles/higginsxtrahull.tik ( 95 4345 776 ) ( 0 0 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( -350 4345 776 ) ( 0 0 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 95 4555 776 ) ( 0 0 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( -350 4555 776 ) ( 0 0 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 95 4765 776 ) ( 0 0 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( -350 4765 776 ) ( 0 0 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( -60 4300 776 ) ( 0 0 0 ) 1

	thread cratesstuff vehicles/higginsxtrahull.tik ( -1550 3600 554 ) ( 0 90 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( -1620 3843 554 ) ( 0 180 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( -2120 3843 554 ) ( 0 180 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( -1550 4043 554 ) ( 0 180 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( -1490 4243 554 ) ( 0 180 0 ) 1
	thread cratesstuff static/indycrate.tik ( -1555 3377 1040 ) ( 0 180 0 ) 1

	thread cratesstuff vehicles/higginsxtrahull.tik ( 780 2727 1052 ) ( 0 180 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 780 2627 1052 ) ( 0 180 0 ) 1

	thread cratesstuff vehicles/higginsxtrahull.tik ( 2500 -4070 440 ) ( 0 180 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 2000 -4070 440 ) ( 0 180 0 ) 1
	thread cratesstuff vehicles/higginsxtrahull.tik ( 1500 -4070 440 ) ( 0 180 0 ) 1

	thread cratesstuff static/banquet_table.tik ( 3030 4454 671 ) ( 0 90 0 ) 1
	thread cratesstuff static/indycrate.tik ( 2731 4080 761 ) ( 0 0 0 ) 1
	thread cratesstuff static/banquet_table.tik ( 5365 6482 919 ) ( 0 90 0 ) 1

	thread cratesstuff static/banquet_table.tik ( -1308 1967 347 ) ( 0 -90 0 )
	thread cratesstuff static/banquet_table.tik ( -1308 2187 347 ) ( 0 -90 0 )

	thread cratesstuff static/indycrate.tik ( -481 426 200 ) ( 0 90 0 ) 1

	thread emitterstuff static/fire.tik ( 1225 1823.5 432 ) ( 0 0 0 ) 0.40
	thread cratesstuff static/fireplaceset.tik ( 1210 1822.5 432 ) ( 0 -90 0 ) 0 1 1
	thread emitterstuff emitters/firesmoke.tik ( 1225 1823.5 462 ) ( 0 180 0 ) 0.5 stop "fireplace_smoke"

	thread emitterstuff static/fire.tik ( 1225 1775.5 660 ) ( 0 0 0 ) 0.40
	thread cratesstuff static/fireplaceset.tik ( 1210 1774.5 660 ) ( 0 -90 0 ) 0 1 1
	thread emitterstuff emitters/firesmoke.tik ( 1225 1775.5 690 ) ( 0 180 0 ) 0.5 stop "fireplace_smoke"

	thread emitterstuff static/fire.tik ( 1235.5 1799.5 884 ) ( 0 0 0 ) 0.40
	thread cratesstuff static/fireplaceset.tik ( 1220.5 1798.5 880 ) ( 0 -90 0 ) 0 1.1 1
	thread emitterstuff emitters/firesmoke.tik ( 1235.5 1799.5 914 ) ( 0 180 0 ) 0.5 stop "fireplace_smoke"

	local.laser = thread spawnlaser ( -744 -1629 393 ) ( -744 -1629 752 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 8
	local.laser = thread spawnlaser ( -744 -1629 393 ) ( -1065 -1629 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 8
	local.laser = thread spawnlaser ( -1065 -1629 393 ) ( -1065 -1060 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 8
	local.laser = thread spawnlaser ( -1448 -1116 393 ) ( -1448 -1116 597 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 8

	local.laser = thread spawnlaser ( 598 -497 393 ) ( 598 -208 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 2
	local.laser = thread spawnlaser ( 224 -711 393 ) ( -88 -711 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 2
	local.laser = thread spawnlaser ( 598 -497 393 ) ( 598 -496 760 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 2
	local.laser = thread spawnlaser ( 224 -711 393 ) ( 224 -711 760 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 2

	thread spawnlaser ( -2608 1581 393 ) ( -2608 1581 603 ) ( 0 1 0 ) 0.5

	local.laser = thread spawnlaser ( 786 -1585 393 ) ( 786 -1585 784 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 7
	local.laser = thread spawnlaser ( 786 -1585 393 ) ( 449 -1585 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 7
	//thread spawnlaser ( 449 -1585 393 ) ( 449 -1573 393 ) ( 0 1 0 ) 0.5
	local.laser = thread spawnlaser ( 449 -1573 393 ) ( 225 -1573 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 7
	local.laser = thread spawnlaser ( 225 -1573 393 ) ( 225 -1465 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 7
	local.laser = thread spawnlaser ( 225 -1465 393 ) ( -62 -1465 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 7
	local.laser = thread spawnlaser ( -62 -1465 393 ) ( -62 -1465 784 ) ( 0 1 0 ) 0.5 "spawnlaser"
	local.laser.newendpoint = ( -62 -1465 560 )
	local.laser.set = 7
	local.laser = thread spawnlaser ( 442 -1465 393 ) ( 200 -1465 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 7

	local.laser = thread spawnlaser ( -710 -841 393 ) ( -710 -841 838 ) ( 0 1 0 ) 0.5 "spawnlaser"
	local.laser.newendpoint = ( -710 -841 451 )
	local.laser.set = 1
	thread spawnlaser ( -710 -841 393 ) ( -1246 -841 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -1454 -761 393 ) ( -1228 -761 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -1454 -761 393 ) ( -1454 -761 671 ) ( 0 1 0 ) 0.5

	//thread spawnlaser ( 1003 -433 393 ) ( 716 -433 393 ) ( 0 1 0 ) 0.5
	//thread spawnlaser ( 1003 -557 393 ) ( 1003 -433 393 ) ( 0 1 0 ) 0.5
	//thread spawnlaser ( 1429 -557 393 ) ( 1003 -557 393 ) ( 0 1 0 ) 0.5

	local.laser = thread spawnlaser ( 1429 -893 393 ) ( 1429 -557 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 4
	local.laser = thread spawnlaser ( 1429 -893 393 ) ( 2007 -893 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 4
	local.laser = thread spawnlaser ( 2007 -893 393 ) ( 2007 -795 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 4
	local.laser = thread spawnlaser ( 2864 -1295 393 ) ( 2006 -795 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 4
	local.laser = thread spawnlaser ( 2864 -1295 393 ) ( 2953 -1128 393 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 4
	local.laser = thread spawnlaser ( 2953 -1128 393 ) ( 2953 -1128 567 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 4

	thread spawnlaser ( 2192 -1625 393 ) ( 1616 -1625 393 ) ( 0 1 0 ) 0.5
	local.laser = thread spawnlaser ( 1616 -1625 393 ) ( 1616 -1625 751 ) ( 0 1 0 ) 0.5 "spawnlaser"
	local.laser.newendpoint = ( 1616 -1625 544 )
	local.laser.set = 6
	local.laser = thread spawnlaser ( 2192 -1625 393 ) ( 2192 -1625 751 ) ( 0 1 0 ) 0.5 "spawnlaser"
	local.laser.newendpoint = ( 2192 -1625 544 )
	local.laser.set = 6

	thread spawnlaser ( -1648 -1529 393 ) ( -2224 -1529 393 ) ( 0 1 0 ) 0.5
	local.laser = thread spawnlaser ( -1648 -1529 393 ) ( -1648 -1529 751 ) ( 0 1 0 ) 0.5 "spawnlaser"
	local.laser.newendpoint = ( -1648 -1529 544 )
	local.laser.set = 9
	local.laser = thread spawnlaser ( -2224 -1529 393 ) ( -2224 -1529 751 ) ( 0 1 0 ) 0.5 "spawnlaser"
	local.laser.newendpoint = ( -2224 -1529 544 )
	local.laser.set = 9

	thread spawnlaser ( 3084 -4013 505 ) ( 3084 -4013 1240 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( 2496 -3537 505 ) ( 2496 -3537 775 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( 1344 -2769 393 ) ( 1344 -2769 775 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -2560 -1081 544 ) ( -2624 -1081 408 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -2560 -1081 544 ) ( -2384 -1081 658 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -3368 -1241 393 ) ( -3368 -1241 903 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -3368 -1241 393 ) ( -3769 -1049 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -3756 -1023 393 ) ( -4265 -769 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -4257 -752 393 ) ( -4760 -501 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -4832 -625 393 ) ( -4760 -501 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -4832 -625 393 ) ( -5345 -370 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5345 -370 393 ) ( -5153 16 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5153 16 393 ) ( -5153 16 751 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -5784 272 393 ) ( -5784 272 1247 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5784 272 393 ) ( -6209 56 393 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -5395 -55 393 ) ( -5395 -55 615 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5395 -55 393 ) ( -5669 420 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5669 420 393 ) ( -5559 484 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5559 484 393 ) ( -5644 632 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5644 632 393 ) ( -5758 566 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5758 566 393 ) ( -6175 1288 393 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -5352 -649 393 ) ( -5352 -649 531 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5736 -841 393 ) ( -5352 -649 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5736 -841 393 ) ( -5991 -331 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -6017 -344 393 ) ( -6209 56 393 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -1243 -2709 649 ) ( -765 -2709 649 ) ( 0 1 0 ) 0.5
	//thread spawnlaser ( -1243 -2709 649 ) ( -1243 -2787 649 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -1243 -2787 649 ) ( -1683 -2787 649 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -1683 -2787 649 ) ( -1683 -3067 649 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -1683 -3067 649 ) ( -2601 -3067 649 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -2601 -3067 649 ) ( -2601 -2786 649 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -2601 -2786 649 ) ( -2601 -2786 867 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -2161 -2584 649 ) ( -2161 -2584 1279 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -1685 -2506 649 ) ( -1685 -2506 795 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -1245 -2444 649 ) ( -1245 -2444 1097 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -6977 -4673 37 ) ( -5000 -4673 37 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -6977 -4673 37 ) ( -6977 -4545 37 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -7233 -4545 37 ) ( -6977 -4545 37 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -7233 -4545 37 ) ( -7233 -4033 37 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -7361 -4033 37 ) ( -7233 -4033 37 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -7361 -4033 37 ) ( -7361 -3730 37 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -4952 -1729 482 ) ( -4952 -1729 1095 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5337 -1921 482 ) ( -4952 -1729 482 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5337 -1921 482 ) ( -5593 -1408 482 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5593 -1408 482 ) ( -5209 -1216 482 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5209 -1216 482 ) ( -5209 -1216 531 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -5209 -1216 531 ) ( -5080 -1152 531 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5080 -1152 531 ) ( -5336 -640 531 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5336 -640 531 ) ( -5352 -649 531 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -4952 -1729 482 ) ( -5209 -1216 482 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -5465 -1343 530 ) ( -5465 -1343 482 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5465 -1343 530 ) ( -5736 -841 530 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5736 -841 530 ) ( -5736 -841 392 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( 2160 4012 409 ) ( 1500 4012 409 ) ( 1 0 0 ) 0.5

	thread spawnlaser ( 3408 5372 409 ) ( 1500 5372 409 ) ( 1 0 0 ) 0.5
	thread spawnlaser ( 3408 5372 409 ) ( 3408 4980 409 ) ( 1 0 0 ) 0.5
	thread spawnlaser ( 3408 4980 409 ) ( 1500 4980 409 ) ( 1 0 0 ) 0.5

	thread spawnlaser ( 715 2811 669 ) ( 715 2540 669 ) ( 1 0 0 ) 0.5

	thread spawnlaser ( 3234 2948 385 ) ( 3035 2948 385 ) ( 1 0 0 ) 0.5
	thread spawnlaser ( 3234 2948 385 ) ( 3234 1820 385 ) ( 1 0 0 ) 0.5

	thread spawnlaser ( 3969 -3632 504 ) ( 3969 -4160 504 ) ( 1 0 0 ) 0.5
	thread spawnlaser ( 3969 -4160 504 ) ( 4355 -4447 393 ) ( 1 0 0 ) 0.5
	thread spawnlaser ( 3969 -4160 504 ) ( 3969 -4160 393 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( 3969 -3632 504 ) ( 3969 -3632 393 ) ( 0 1 0 ) 0.5

	thread spawnlaser ( -5337 -1921 482 ) ( -5337 -1921 1095 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5593 -1408 482 ) ( -5593 -1408 1095 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -6209 56 393 ) ( -6209 56 1247 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -5345 -370 393 ) ( -5345 -370 751 ) ( 0 1 0 ) 0.5
	thread spawnlaser ( -4832 -625 393 ) ( -4832 -625 751 ) ( 0 1 0 ) 0.5
	local.laser = thread spawnlaser ( -1065 -1629 393 ) ( -1065 -1629 751 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 8
	local.laser = thread spawnlaser ( 1429 -893 393 ) ( 1429 -893 600 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 4
	local.laser = thread spawnlaser ( 2864 -1295 393 ) ( 2864 -1295 591 ) ( 0 1 0 ) 0.5 "cratesstuff"
	local.laser.set = 5

	local.laser = thread spawnlaser ( 224 -496 577 ) ( 224 -152 577 ) ( 1 0 0 ) 0.5 "cratesstuff"
	local.laser.set = 2
	local.laser = thread spawnlaser ( 224 -496 577 ) ( 600 -496 577 ) ( 1 0 0 ) 0.5 "cratesstuff"
	local.laser.set = 2

	local.inverted_color = ( (1.000 - $world.farplane_color[0]) (1.000 - $world.farplane_color[1]) (1.000 - $world.farplane_color[2]) ) // makes map-edge lasers much more visible.
	thread spawnlaser ( -2784 -3341 649 ) ( -2784 -3341 200 ) local.inverted_color 2
	thread spawnlaser ( -2784 -3341 649 ) ( -856 -3341 649 ) local.inverted_color 2
	thread spawnlaser ( -856 -3341 649 ) ( -856 -3341 274 ) local.inverted_color 2
	thread spawnlaser ( -856 -3341 274 ) ( -1289 -4044 45 ) local.inverted_color 2
	thread spawnlaser ( -1289 -4044 45 ) ( -1716 -4736 45 ) local.inverted_color 2
	thread spawnlaser ( -1716 -4736 45 ) ( -2310 -5696 -505 ) local.inverted_color 2
	thread spawnlaser ( -3263 -5566 -430 ) ( -1900 -5566 -430 ) local.inverted_color 2

	thread spawnlaser ( -1289 -4044 45 ) ( -3765 -4044 45 ) local.inverted_color 0.5
	thread spawnlaser ( -1716 -4736 45 ) ( -4033 -4736 45 ) local.inverted_color 0.5

	thread spawnlaser ( -4927 -5057 1220 ) ( -4927 -5057 -600 ) local.inverted_color 2
	//thread spawnlaser ( -5070 -5057 -145 ) ( -4927 -5057 -145 ) local.inverted_color 2
	thread spawnlaser ( -5070 -5057 -145 ) ( -5070 -5960 -470 ) local.inverted_color 2

	thread spawnlaser ( 4353 -5247 130 ) ( 1649 -5247 130 ) local.inverted_color 2
	thread spawnlaser ( 1649 -5247 130 ) ( 1649 -4160 505 ) local.inverted_color 2
	thread spawnlaser ( 1649 -4160 505 ) ( 1649 -4012 505 ) local.inverted_color 2

	thread spawnlaser ( -6775 -1761 392 ) ( -3135 -1761 392 ) local.inverted_color 2
	thread spawnlaser ( -6775 -1761 392 ) ( -6775 -1761 35 ) local.inverted_color 2

	local.emitter = thread emitterstuff emitters/shermansmoke.tik ( 2921.5 3263.5 1424 ) ( 270 0 0 ) 1 idle "cratesstuff"
	thread emitterstuff emitters/shermansmoke.tik ( 773.5 4987.5 936 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( 99.5 4373 1456 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( -175.5 4487.5 1416 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( -1087.5 3051.5 1456 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( -1207.5 2775.5 1416 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( -1207.5 1939.5 1440 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( 1391.5 2119.5 1328 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( 1235.5 1799.5 1536 ) ( 270 0 0 )
	local.emitter = thread emitterstuff emitters/shermansmoke.tik ( 4 -659.5 928 ) ( 270 0 0 ) 1 idle "cratesstuff"
	local.emitter.set = 2
	local.emitter = thread emitterstuff emitters/shermansmoke.tik ( -843.5 -1567.5 928 ) ( 270 0 0 ) 1 idle "cratesstuff"
	local.emitter.set = 8
	thread emitterstuff emitters/shermansmoke.tik ( -2175.33 1855.5 1300 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( -2215.66 1855.5 1300 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( -2175.33 2279.5 1300 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( -2215.66 2279.5 1300 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( 122 -2539.5 1304 ) ( 270 0 0 )
	thread emitterstuff emitters/shermansmoke.tik ( 165 -2539.5 1304 ) ( 270 0 0 )

	thread lasers_exploder_adjust 1
	thread lasers_exploder_adjust 6
	thread lasers_exploder_adjust 7
	thread lasers_exploder_adjust 9
	thread lasers_exploder_add1
	thread lasers_exploder_add2
	thread lasers_exploder_add3

if(getcvar("g_ubergametype") != "bb")
{
}
end

UBER_mapextras:
end

cratesstuff local.model local.origin local.angles local.hide local.scale local.notsolid local.targetname:

	local.ent = spawn script_model
	local.ent model local.model
	local.ent.origin = local.origin
	if(local.angles[2] != NIL) { local.ent.angles = local.angles }
	if(local.hide == 1) { local.ent hide }
	if(local.scale != NIL && local.scale > 0) { local.ent.scale = local.scale }
	if(local.targetname != NIL) { local.ent.targetname = local.targetname }
	if(local.notsolid == 1) { local.ent notsolid }
end local.ent

emitterstuff local.model local.origin local.angles local.scale local.anim local.targetname:

	local.emitter = spawn script_model
	local.emitter model local.model
	if(local.emitter.model == "models/emitters/inferno.tik") { local.emitter.origin = local.origin + ( 0 0 50 ) }
	else { local.emitter.origin = local.origin }
	if(local.angles[2] != NIL) { local.emitter.angles = local.angles }
	if(local.scale != NIL && local.scale > 0) { local.emitter.scale = local.scale }
	if(local.anim != NIL) { local.emitter anim local.anim }
	if(local.targetname != NIL) { local.emitter.targetname = local.targetname }
	local.emitter notsolid
end local.emitter

solidclip local.origin local.setsize1 local.setsize2 local.angle local.targetname:

	local.clip = spawn script_object
	local.clip.origin = local.origin
	local.clip setsize local.setsize1 local.setsize2
	local.clip.angle = local.angle
	local.clip solid
	local.clip nodamage
	if(local.targetname != NIL) { local.clip.targetname = local.targetname }
end

spawnlaser local.origin local.endpoint local.color local.scale local.targetname:

	local.laser = spawn func_beam
	local.laser minoffset 0.0
	local.laser maxoffset 0.0
	local.laser numsegments 1
	local.laser life 0
	local.laser color local.color
	local.laser alwaysdraw
	local.laser activate	
	if(local.scale == NIL || local.scale <= 0) { local.laser scale 1 }
	else { local.laser scale local.scale }
	local.laser notsolid
	local.laser.origin = local.origin
	local.laser endpoint local.endpoint
	if(local.targetname != NIL) { local.laser.targetname = local.targetname }
end local.laser

////////////////////////////////////////////////////////////////////////

cyb:

level waittill spawn

	level.round_starttime = 8
	level.rounds_towin = 6
 	level.changesides = 0
	level.keepsamesides = 1
	level.bombcamera = 1

  	waitthread global/cyberattack_searchdestroy.scr::bombsite ( -6707 -4388 36 ) 90 axis    // for cyber attack only
  	waitthread global/cyberattack_searchdestroy.scr::bombsite ( 883 5899 384 ) 0 allies

  	thread global/cyberattack_searchdestroy.scr::bomb ( 0 0 0 ) 0 ( 0 0 0 ) 0 ( -400 768 456 ) 0		// allies bomb (snd), axis bomb (snd), radiobomb (cyb).
	exec global/cyberattack_searchdestroy.scr								// none of these can be NIL. instead, use ( 0 0 0 ) 0 if not being used.
end

////////////////////////////////////////////////////////////////////////

snd:

level waittill spawn

	level.round_starttime = 8
	level.rounds_towin = 6
 	level.changesides = 0
	level.bombcamera = 1
	//level.cameradistance = 200 // this can be changed for each "changesides" if a bombsite is inside a small room, so the camera is not inside of a wall

	if(level.changesides == 0) // allies are planting (axis bombsite origins)
	{
  		waitthread global/cyberattack_searchdestroy.scr::bombsite ( -6709 -4388 36 ) 90		// for search & destroy only, team parameter doesn't matter
  		waitthread global/cyberattack_searchdestroy.scr::bombsite ( 2917 -3727 504 ) 90		// make sure to include initial bombsites before the while-loop begins.
	}
	if(level.changesides == 1) // axis are planting (allies bombsite origins)
	{
  		waitthread global/cyberattack_searchdestroy.scr::bombsite ( 883 5888 384 ) 0
  		waitthread global/cyberattack_searchdestroy.scr::bombsite ( 3004 5156 238 ) 180
	}

  	thread global/cyberattack_searchdestroy.scr::bomb ( 832 3392 306 ) 180 ( -645 -1756 392 ) 180 ( 0 0 0 ) 0
	exec global/cyberattack_searchdestroy.scr // begin the main script

//-----------------------------------------------------------------------------

	local.sides = level.changesides	// when the sides change each 3 rounds, old bombsites are removed and 2 ones are added closer to the defending team's spawn.
	while(1)
	{
		if(level.changesides != local.sides)
		{
			waitthread global/cyberattack_searchdestroy.scr::bombsites_remove

			if(level.changesides == 0)
			{
  				waitthread global/cyberattack_searchdestroy.scr::bombsite ( -6709 -4388 36 ) 90
  				waitthread global/cyberattack_searchdestroy.scr::bombsite ( 2917 -3727 504 ) 90
			}
			if(level.changesides == 1)
			{
  				waitthread global/cyberattack_searchdestroy.scr::bombsite ( 883 5888 384 ) 0
  				waitthread global/cyberattack_searchdestroy.scr::bombsite ( 3004 5156 238 ) 180
			}
			local.sides = level.changesides
		}
		waitframe
	}
end

////////////////////////////////////////////////////////////////////////

bb_objects:

level waittill prespawn

//allies
exec alienx/basebuild.scr::basebuild ( 1742.04 4013.87 280.13 ) "static/indycrate.tik" 1 0 1 0 90 .5 0 0 1
exec alienx/basebuild.scr::basebuild ( 1742.04 4113.87 280.13 ) "statweapons/mg42_gun.tik" 1 1 0 0 90 .5 0 0 1
exec alienx/basebuild.scr::basebuild ( 1742.04 4213.87 280.13 ) "statweapons/flak88turret.tik" 1 1 .5 0 90 .25 0 0 1
exec alienx/basebuild.scr::basebuild ( 1742.04 4313.87 270.13 ) "static/sandbag_link_main.tik" 1 0 0 1 90 .5 0 0 1
exec alienx/basebuild.scr::basebuild ( 1742.04 4413.87 270.13 ) "static/indycrate.tik" 1 1 0 1 90 .5 1 0 1 // lift
exec alienx/basebuild.scr::basebuild ( 1742.04 4513.87 270.13 ) "static/bunkertable.tik" 1 1 1 0 90 .5 0 1 1 // tele
exec alienx/basebuild.scr::basebuild ( 1742.04 4613.87 260.13 ) "static/banquet_table.tik" 1 0 1 1 90 .5 0 0 1
exec alienx/basebuild.scr::basebuild ( 1742.04 4713.87 260.13 ) "static/bodies_tarp.tik" 1 1 1 1 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( 1742.04 4813.87 260.13 ) "static/bookcase.tik" 1 0 1 0 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( 1742.04 4913.87 250.13 ) "static/static_naziflag1.tik" 1 1 1 1 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( 1742.04 5013.87 250.13 ) "static/barbwire.tik" 1 0 1 1 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( 1742.04 5113.87 250.13 ) "static/sandbag_longsegment.tik" 1 0 0 1 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( 1742.04 5213.87 250.13 ) "static/cabinet_large.tik" 1 1 1 1 90 .6 0 0 1
//exec alienx/basebuild.scr::basebuild ( 1742.04 5313.87 250.13 ) "static/bush_full.tik" 1 0 1 0 90 .5 0 0 0

//axis
exec alienx/basebuild.scr::basebuild ( -1516.96 -2200.62 392.13 ) "static/indycrate.tik" 1 0 1 0 90 .5 0 0 1
exec alienx/basebuild.scr::basebuild ( -1416.96 -2200.62 392.13 ) "statweapons/mg42_gun.tik" 1 1 0 0 90 .5 0 0 1
exec alienx/basebuild.scr::basebuild ( -1316.96 -2200.62 392.13 ) "statweapons/flak88turret.tik" 1 1 .5 0 90 .25 0 0 1
exec alienx/basebuild.scr::basebuild ( -1216.96 -2200.62 392.13 ) "static/sandbag_link_main.tik" 1 0 0 1 90 .5 0 0 1
exec alienx/basebuild.scr::basebuild ( -1116.96 -2200.62 392.13 ) "static/indycrate.tik" 1 1 0 1 90 .5 1 0 1 // lift
exec alienx/basebuild.scr::basebuild ( -1016.96 -2200.62 392.13 ) "static/bunkertable.tik" 1 1 1 0 90 .5 0 1 1 // tele
exec alienx/basebuild.scr::basebuild ( -916.96 -2200.62 392.13 ) "static/banquet_table.tik" 1 0 1 1 90 .5 0 0 1
exec alienx/basebuild.scr::basebuild ( -816.96 -2200.62 392.13 ) "static/bodies_tarp.tik" 1 1 1 1 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( -716.96 -2200.62 392.13 ) "static/bookcase.tik" 1 0 1 0 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( -616.96 -2200.62 392.13 ) "static/static_naziflag1.tik" 1 1 1 1 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( -516.96 -2200.62 392.13 ) "static/barbwire.tik" 1 0 1 1 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( -416.96 -2200.62 392.13 ) "static/sandbag_longsegment.tik" 1 0 0 1 90 .5 0 0 1
//exec alienx/basebuild.scr::basebuild ( -316.96 -2200.62 392.13 ) "static/cabinet_large.tik" 1 1 1 1 90 .6 0 0 1
//exec alienx/basebuild.scr::basebuild ( -216.96 -2200.62 392.13 ) "static/bush_full.tik" 1 0 1 0 90 .5 0 0 0
end

////////////////////////////////////////////////////////////////////////

consoleprint:

	wait 1
	if(level.objectlimit != NIL && level.build_number != NIL) { end }

	local.maxclients = int(getcvar(sv_maxclients))
	local.nullent = 0
	local.e = 0
	for(local.i = 0; local.i <= 868; local.i++) // getentity() only goes up to 868 (869 entities).
	{
		if(local.i % 14 == 0) { waitframe } // every 62 entites (if local.i / 14 has remainder of 0), do a waitframe (speeds up counting).

		local.entity = getentity(local.i) // $player[1] = entity 0		
		if(local.entity == NULL && local.i >= local.maxclients) { local.nullent++ }
		if(local.entity != NULL) { local.e++ }
		if(local.e >= 850 - local.maxclients) { local.warning = 1 }
	}
	if(local.entity == NULL) // if entity 868 = NULL
	{
		println("----- Entities in map: " + (1024 - local.nullent - 155) + " / 1024")
		println("----- Entities remaining: " + (local.nullent + 155))
	}
	if(local.entity != NULL)
	{
		println("----- Entities in map: " + "more than 869" + " / 1024")
		println("----- Entities remaining: less than 155 entities.")
	}
	if(local.warning == 1)
	{
		wait 1
		println("----- WARNING: Keep below 850 entities on SP maps for Reborn servers!")
		println("----- Players may soon be unable to join! (stuck connecting to sever)")
	}
end

clickitem_fail:
end

bomberdetect local.bomb:
end
bomberhit:
end
flak88click:
end
dotankkill:
end
enemytankstart:
end
buildingsolid:
end
artilleryattack:
end
bridgeprep2:
end
alarm2:
end
alarm1:
end
click9:
end
click8:
end
click7:
end
click6:
end
click5:
end
click4:
end
click3:
end
click2:
end
click1:
end
clickhit:
end

